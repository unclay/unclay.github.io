{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/eleven/source/css/style.less","path":"css/style.less","modified":0,"renderable":1},{"_id":"themes/eleven/source/css/index.less","path":"css/index.less","modified":0,"renderable":1},{"_id":"themes/eleven/source/css/archive.less","path":"css/archive.less","modified":0,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"738c5c67e75ec9098123b48c1ddcb0c6d2a3125c","modified":1521475656000},{"_id":"themes/eleven/.DS_Store","hash":"42dea73e9920b1ad510ce0e72cff38c0f1caf693","modified":1521251784000},{"_id":"themes/eleven/_config.yml","hash":"efd8243f8c7bab8e0ddec20705542c5e3b1226d9","modified":1521342739000},{"_id":"themes/eleven/package.json","hash":"21f82e2aba3167663a4b106bd4577484c43e2ef7","modified":1521341127000},{"_id":"themes/eleven/package-lock.json","hash":"163e160bb4d4b4a7df4d6acda99496fbdfb7ea53","modified":1521251862000},{"_id":"source/_posts/Proxy.md","hash":"2f33c89969cb5c7aa9d3207f0fcc545400d0d2e7","modified":1519969323000},{"_id":"source/_posts/closure.md","hash":"68b116d8b284c8b85e512d61ce58657f8a41da49","modified":1510907652000},{"_id":"source/_posts/components-start.md","hash":"83232250713f10ad7e8ab045d9439cccf017f281","modified":1506064061000},{"_id":"source/_posts/css-background.md","hash":"3d13c5d32e65ed323e600b3f99cc989b296b48f3","modified":1504853687000},{"_id":"source/_posts/css-box-and-graph.md","hash":"d6316d2a9c1424fea020b7cc436fb35fb4f43e35","modified":1504853685000},{"_id":"source/_posts/css-pseudo-class-one.md","hash":"bb52a4eeef0c2e390d446501ec327f4a85342793","modified":1519969323000},{"_id":"source/_posts/css-horizontal-vertical-center.md","hash":"262f79385e8bbae4339d85d58c0b0dba201358a1","modified":1502176970000},{"_id":"source/_posts/css-clearfix-md.md","hash":"36e618b017a1b8b192e8b89e13cc7114dc81d856","modified":1504853674000},{"_id":"source/_posts/design-pattern-singleton-pattern.md","hash":"d09038018a4b25ca3cf333b99e9c8e2755b433e2","modified":1513319316000},{"_id":"source/_posts/fe-intro.md","hash":"5e0d910937d21ccc9c45fa91074ea88fd81e1b9c","modified":1512114604000},{"_id":"source/_posts/git.md","hash":"736d1ec64712c25dedc4a3c89fc94c87521aa7f0","modified":1512114604000},{"_id":"source/_posts/css-word-break.md","hash":"af1c4a42a8c30a9360db5b6f755240ff5c76fe9b","modified":1503028182000},{"_id":"source/_posts/how-to-create-a-nodejs-spider.md","hash":"d568f266ae7988f70699171def04ea46d1ebcb73","modified":1513319306000},{"_id":"source/_posts/js-array.md","hash":"7dc7cb066f22a02ba1a629616dd57e8531359a32","modified":1513921783000},{"_id":"source/_posts/js-equal-and-implicitcoercion.md","hash":"f276649c04984a9e7cace12735a0c507aea2124c","modified":1509100956000},{"_id":"source/_posts/js-error-type.md","hash":"4c9ed42e90c170eeacc9a4d6e59ca097f24cd880","modified":1512114604000},{"_id":"source/_posts/module-and-requirejs.md","hash":"516b7a2f0c138d4250c91373df7dde76cf99309b","modified":1505814847000},{"_id":"source/_posts/nodejs-start.md","hash":"5f52c41ee359b0ce70a48bb52b1ce230f0441344","modified":1513926976000},{"_id":"source/_posts/monitor-errorlog-partone.md","hash":"32c9f6197027c76208b04fdf221f8e7addbcfc72","modified":1519969323000},{"_id":"source/_posts/note-style.md","hash":"aa81dff6ea01c4425b961cae46fe11d72fb1e0af","modified":1504854051000},{"_id":"source/_posts/npm-install-module-from-github.md","hash":"7a52d25622c931d4cad2aabb0c92d2fd50056dd8","modified":1519969324000},{"_id":"source/_posts/optimize-browser-rendering.md","hash":"412e6c77990028b781e06fd8016f92a62a49c224","modified":1504853588000},{"_id":"source/_posts/npm.md","hash":"a80c75b5928765dab6d0726d32b9868f0b181753","modified":1512114604000},{"_id":"source/_posts/puppeteer-getting-started.md","hash":"10b1f9857385f886416ecfeac5bae2e4a3131701","modified":1521258169000},{"_id":"source/_posts/requirejs-qa.md","hash":"321a4b4bdaf1b922b8afa99e8ff84824504eed8a","modified":1510907652000},{"_id":"source/_posts/reviwe-source-account.md","hash":"3ebb6423b4f2141e368b0036c32d4a643433978c","modified":1519969324000},{"_id":"source/_posts/something-about-canvas.md","hash":"3112f02670c95e4ae1d9a0a27cd08ab4272292b9","modified":1513319306000},{"_id":"source/_posts/source-ivf-assistant.md","hash":"3da2e82a42d8f201ee311a9d7156802995cc966e","modified":1510908346000},{"_id":"source/_posts/upload.md","hash":"cc139f7443f7624daa65af5f66ca697865e559d6","modified":1509100956000},{"_id":"source/_posts/vue-ali-health.md","hash":"e296219d1d1c1cc2831ce46ec002abb59ffe0187","modified":1505814821000},{"_id":"source/_posts/vue-demo-dev-server.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 10.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 11.md","hash":"4fb94f3e91ef2b3f7b5fbad73783cb209568de42","modified":1521300949000},{"_id":"source/_posts/vue-demo-dev-server的副本 12.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 14.md","hash":"290cbf70d7b78c60117f52dfba8d1fca7476ceb7","modified":1521300952000},{"_id":"source/_posts/vue-demo-dev-server的副本 13.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 16.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 15.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 17.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 18.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 19.md","hash":"ab67bc41f82eb9589bed92391676bdd5719d912f","modified":1521300955000},{"_id":"source/_posts/vue-demo-dev-server的副本 2.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 21.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 20.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 23.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 22.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 24.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 25.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 26.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 27.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 28.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 3.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 29.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 30.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 31.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 33.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 35.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 32.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 34.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 36.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 6.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 4.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 7.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 5.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/about/index.md","hash":"26fb66e3cb2b5c21aaa7968f1eccd84fc7ee8227","modified":1521342648000},{"_id":"source/_posts/vue-demo-dev-server的副本 9.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/_posts/vue-demo-dev-server的副本 8.md","hash":"0772365e98cef0ee5b6f735c280738380545924a","modified":1513319603000},{"_id":"source/bak/hello-world - 副本 (10).md","hash":"f285bc88d3414d0c4a916cd886fccd6424567cbc","modified":1521104508000},{"_id":"source/bak/hello-world - 副本 (11).md","hash":"f285bc88d3414d0c4a916cd886fccd6424567cbc","modified":1521104508000},{"_id":"source/bak/hello-world - 副本 (2).md","hash":"f285bc88d3414d0c4a916cd886fccd6424567cbc","modified":1521104508000},{"_id":"source/bak/hello-world - 副本 (3).md","hash":"f285bc88d3414d0c4a916cd886fccd6424567cbc","modified":1521104508000},{"_id":"source/bak/hello-world - 副本 (5).md","hash":"f285bc88d3414d0c4a916cd886fccd6424567cbc","modified":1521104508000},{"_id":"source/bak/hello-world - 副本 (4).md","hash":"f285bc88d3414d0c4a916cd886fccd6424567cbc","modified":1521104508000},{"_id":"source/bak/hello-world - 副本 (7).md","hash":"f285bc88d3414d0c4a916cd886fccd6424567cbc","modified":1521104508000},{"_id":"source/bak/hello-world - 副本 (6).md","hash":"f285bc88d3414d0c4a916cd886fccd6424567cbc","modified":1521104508000},{"_id":"source/bak/hello-world - 副本 (8).md","hash":"f285bc88d3414d0c4a916cd886fccd6424567cbc","modified":1521104508000},{"_id":"source/bak/hello-world - 副本 (9).md","hash":"f285bc88d3414d0c4a916cd886fccd6424567cbc","modified":1521104508000},{"_id":"source/bak/hello-world - 副本.md","hash":"f285bc88d3414d0c4a916cd886fccd6424567cbc","modified":1521104508000},{"_id":"source/bak/hello-world.md","hash":"f285bc88d3414d0c4a916cd886fccd6424567cbc","modified":1521104508000},{"_id":"themes/eleven/languages/default.yml","hash":"f92db30b818ae4aac54d65fa8cc8f822170aaa0c","modified":1521341643000},{"_id":"themes/eleven/languages/zh-CN.yml","hash":"d7f16428832cc25d6828a8ce9e23ed533253bd8b","modified":1521342776000},{"_id":"themes/eleven/layout/about.ejs","hash":"4527846f1d65a1a99d130d22cb54c3e49be7fb51","modified":1521341595000},{"_id":"themes/eleven/layout/index.ejs","hash":"a1e773009138ca4415337ead32cbee6708f21462","modified":1521104601000},{"_id":"themes/eleven/layout/archive.ejs","hash":"72fdc319d394f73aa92d3dfde6e384c329de8529","modified":1521307157000},{"_id":"themes/eleven/layout/layout.ejs","hash":"8706056d7a38b5d3bee1792d447d8f2523344028","modified":1521307561000},{"_id":"themes/eleven/layout/post.ejs","hash":"e44c09a04cb327696e872fd196c9227f61f562d5","modified":1521252175000},{"_id":"themes/eleven/layout/_partial/footer.ejs","hash":"af5205fefcc4cddd458f70a68127e30f6f41ac4b","modified":1521341518000},{"_id":"themes/eleven/layout/_partial/head.ejs","hash":"e608b86d82bf823cb05396b50f8f37cebe22b756","modified":1521561867000},{"_id":"themes/eleven/layout/_partial/header.ejs","hash":"f9c141ce55f3073be141b9391e3e2d81cc2ce73e","modified":1521305035000},{"_id":"themes/eleven/layout/_partial/paginator.ejs","hash":"52c1cf2c67eaf3292b65a0a2805783cfb24866cd","modified":1521474172000},{"_id":"themes/eleven/node_modules/github-markdown-css/github-markdown.css","hash":"c5cb70d18007a29462e21a2b3e643b05f2db10cd","modified":1514724793000},{"_id":"themes/eleven/node_modules/github-markdown-css/license","hash":"5aaf48196ddd4d007a3067aa7f30303ca8e4b29c","modified":1496344655000},{"_id":"themes/eleven/node_modules/github-markdown-css/package.json","hash":"d7902ecec709c61d4b7551fefd61dd38bf1a4225","modified":1521251862000},{"_id":"themes/eleven/node_modules/github-markdown-css/readme.md","hash":"44a0b748822f37a225dfcd2dd4efbd88e9d3b9e3","modified":1508050465000},{"_id":"themes/eleven/source/css/_var.less","hash":"a4dd103ea31e2091ce08b31bdd0862dce555acdb","modified":1521563583000},{"_id":"themes/eleven/source/css/style.less","hash":"27608bb08411654d649e1a292ea5ba8d376e0f6c","modified":1521475021000},{"_id":"themes/eleven/source/css/_partial/archive.less","hash":"dc9160d062c9373e18c7ca7300a193d75f23023f","modified":1521340800000},{"_id":"themes/eleven/source/css/_partial/highlight.less","hash":"ff062b33c0ba739d0d3facc0dd2f966cb69c8dda","modified":1521300904000},{"_id":"themes/eleven/source/css/_partial/paginator.less","hash":"d16084e799d4e5c21ea8a72d0b82f2dd2a0d86db","modified":1521340717000},{"_id":"themes/eleven/source/css/_partial/markdown.less","hash":"3127f8321da8299c1405b93ccf067d2fe66fb6a1","modified":1521563497000},{"_id":"themes/eleven/source/css/_partial/post.less","hash":"72dfa23ac793e602d62f67e65a75dfdd4405fa66","modified":1521340579000},{"_id":"themes/eleven/source/css/_partial/common/footer.less","hash":"60e1a87008437775b9bd4c63f9191c4f3fc30292","modified":1521340879000},{"_id":"themes/eleven/source/css/_partial/common/header.less","hash":"7af362e067e8453aa076a3182827e77035400a0b","modified":1521340155000},{"_id":"source/_posts/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1521475105000},{"_id":"source/_posts/hexo-start.md","hash":"a8b9672a7ca35800569f1165f6e7b33441bc4483","modified":1521475263000},{"_id":"source/_posts/hexo-theme.md","hash":"b00bb61f897c0fa731d73741ceed812d652a7b25","modified":1521474898000},{"_id":"themes/eleven/source/css/archive.less","hash":"4baa8c9746696eefd19e31e74a03fd3f1e368273","modified":1521474960000},{"_id":"themes/eleven/source/css/index.less","hash":"cc339cbe6d9124078f8ae2dfb038351056338101","modified":1521473415000},{"_id":"themes/eleven/source/css/_partial/footer.less","hash":"60e1a87008437775b9bd4c63f9191c4f3fc30292","modified":1521474995000},{"_id":"themes/eleven/source/css/_partial/header.less","hash":"7af362e067e8453aa076a3182827e77035400a0b","modified":1521474984000},{"_id":"public/2017/07/25/hexo-start/index.html","hash":"30e639a72c18453b1cdef1aa59dcfc24ba995933","modified":1521563796494},{"_id":"public/archives/index.html","hash":"75a05036bcc276fea3746aca23ea221bd01d81a5","modified":1521563796496},{"_id":"public/archives/2017/index.html","hash":"f669353248636372c75f3a8f8a374b21cc6c7c68","modified":1521563796496},{"_id":"public/archives/2018/index.html","hash":"eb2050c4fd0cf43b41e95193378cdb9e076417ee","modified":1521563796496},{"_id":"public/categories/lab/index.html","hash":"fcf832d4b717997783d6aa13e161868b7c3c6843","modified":1521563796496},{"_id":"public/index.html","hash":"5bafe4050422a5a7ccc2b6bba885cd93e9c07575","modified":1521563796496},{"_id":"public/tags/hexo/index.html","hash":"fcf832d4b717997783d6aa13e161868b7c3c6843","modified":1521563796496},{"_id":"public/2018/03/18/hexo-theme/index.html","hash":"7cbb983189ba7adecb240565f50a1ec05de96625","modified":1521563796496},{"_id":"public/css/archive.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1521563796524},{"_id":"public/css/index.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1521563796524},{"_id":"public/css/style.css","hash":"456f0798ec1973f6c4316797ae36411a43976e7f","modified":1521563796567},{"_id":"source/_posts/custom-ajax-jsonp.md","hash":"3ce585db20e8fbfab5134fd2e511c8f05936f380","modified":1521563410000},{"_id":"source/_posts/fe-algorithm-bitmap.md","hash":"832e19bab9550082d1c999b2fd34640edf95b40a","modified":1521562769000},{"_id":"source/_posts/ubuntu-14.04-nodejs-install.md","hash":"282cb51ac7ea20f84e697a23e78bc902510d56aa","modified":1521562707000},{"_id":"source/_posts/ubuntu-16.04-nodejs-install.md","hash":"84d860e61a5774138665f4b49c95e6b021880196","modified":1521562735000},{"_id":"public/2017/10/24/fe-algorithm-bitmap/index.html","hash":"832c53e4195e67cc0a4289e82e23715a677f793b","modified":1521563796494},{"_id":"public/2017/05/13/ubuntu-16.04-nodejs-install/index.html","hash":"c56a85f916bafe763f65aa52553aa93e3c9492d0","modified":1521563796495},{"_id":"public/2017/05/10/ubuntu-14.04-nodejs-install/index.html","hash":"dfb162c15a8499efd1c1236a2ff782af67873ce9","modified":1521563796495},{"_id":"public/2017/04/10/custom-ajax-jsonp/index.html","hash":"e77d0d4a7e8c7a6bdcbb3fd6659c215c7cef8a98","modified":1521563796495},{"_id":"public/tags/javascript/index.html","hash":"234d7d9f8943227dd00120e2e396c73de3c32bf7","modified":1521563796495},{"_id":"public/tags/ubuntu/index.html","hash":"3361d23ded0ffadada079e7e4e35d42f51febb4a","modified":1521563796496},{"_id":"public/tags/nodejs/index.html","hash":"3361d23ded0ffadada079e7e4e35d42f51febb4a","modified":1521563796496},{"_id":"public/tags/algorithm/index.html","hash":"855b25f1fb5e0ac5c5c62e4e50c0c187e5204086","modified":1521563796496}],"Category":[{"name":"lab","_id":"cjew8dgjk0001uq2e9xtfidmi"}],"Data":[],"Page":[],"Post":[{"title":"Hexo折腾记","date":"2018-03-17T16:00:00.000Z","_content":"\n个人比较喜欢简约版的风格，\n再加上爱折腾，\n闲来没事就自己折腾个hexo主题。\n<!--more-->\n\n## 准备功课\n\n本人非设计师，对于自己来设计还是压力挺大的，于是寻找自己喜欢的风格加（ju）以（wei）吸（ji）收（yong）。\n\n参考主题：\n+ <a href=\"https://www.haomwei.com/\" target=\"_blank\">Maupassant</a>\n+ <a href=\"https://d2fan.com/\" target=\"_blank\">PolarBear</a>\n\n开始前你需要了解：\n+ 模板引擎\n+ css预处理器\n+ hexo文档\n\n为了减少折腾成本，选了自己熟悉的<a href=\"http://ejs.co/\">ejs</a>作为我的模板引擎，而css预处理器则选择<a href=\"http://lesscss.org/\">less</a>。ejs是hexo预安装的插件，less非预装的，所以需要自己手动安装。\n\n```bash\n# 当前目录/blog\n$ npm install hexo-renderer-less --save\n```\n\n## 目录结构\n\n首先假设自己的项目名为blog，主题名为blog-theme\n\n+ hexo目录 https://hexo.io/zh-cn/docs/setup.html\n+ themes目录 https://hexo.io/zh-cn/docs/themes.html\n\n```mel\nblog\n  ├── _config.yml\n  ├── package.json\n  ├── scaffolds\n  ├── source\n  ├   ├── _drafts\n  ├   └── _posts\n  ├── themes\n  └      └── blog-theme\n\nblog-theme\n  ├── _config.yml 主题配置文件\n  ├── languages   语言文件\n  ├── layout      布局文件，页面模板\n  ├── scripts     Hexo脚本\n  └── source      资源文件，主题的css、js、font等\n```\n\n### 设置生效主题\n\n##### blog/_config.yml\n\n```yml\n...\ntheme: hexo-blog\n...\n```\n\n### 配置主题导航\n\n##### blog-theme/_config.yml\n\n```yml\n# create time\nsince: 2017\n\n# header\nmenu:\n  Home: /\n  Archives: /archives/\n```\n\n## 页面模板\n\n### 模板前言\n\n开始前你需要了解的模板<a href=\"https://hexo.io/zh-cn/docs/variables.html\" target=\"_blank\">变量</a>：\n+ config blog的_config.yml文件\n+ theme  blog-theme的_config.yml文件\n+ <a href=\"https://hexo.io/zh-cn/docs/variables.html#页面变量\">page</a> hexo的页面内容，包含文章信息、分页信息、分类、标签、归档等信息\n\n由于需要公共的头尾部，需要通过layout来布局\n\n\n#### 主题模板\n\n```mel\nlayout\n  ├── _partial 局部模板目录\n  ├       ├── head.ejs head信息\n  ├       ├── header.ejs 头部模板\n  ├       └── footer.ejs 尾部模板\n  ├── layout.ejs  布局模板壳\n  └── index.ejs   首页\n  └── archive.ejs 归档\n```\n\n##### layout/layout.ejs\n\n```html\n<!DOCTYPE html>\n<html>\n  <%- partial('_partial/head') %>\n  <body>\n    <container class=\"container\">\n      <%- partial('_partial/header') %>\n      <main class=\"main\">\n        <%- body %>\n      </main>\n      <%- partial('_partial/footer') %>\n    </container>\n  </body>\n</html>\n```\n\n##### layout/index.ejs\n\n```html\nHello World\n```\n\n##### layout/archive.ejs\n\n```html\nHello World\n```\n\n##### layout/_partial/head.ejs\n\n```html\n<head>\n  <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n  <title><%= config.title %></title>\n</head>\n```\n\n##### layout/_partial/header.ejs\n\n```html\n<header class=\"header\">\n  <div class=\"blog-title\">\n    <a href=\"<%- url_for() %>\" class=\"logo\"><%= config.title %></a>\n  </div>\n  <nav class=\"navbar\">\n    <ul class=\"menu\">\n      <% for (name in theme.menu) { %>\n        <li class=\"menu-item\">\n          <a href=\"<%- url_for(theme.menu[name]) %>\" class=\"menu-item-link\"><%- name %></a>\n        </li>\n      <% } %>\n    </ul>\n  </nav>\n</header>\n```\n\n##### layout/_partial/footer.ejs\n\n```html\n<div class=\"footer\">\n  Copyright © <%=theme.since%><% if (theme.since < new Date().getFullYear()) { %>\n    <%= ' - ' + new Date().getFullYear()%>\n  <% } %> <%=config.author%> | \n  Powered by <a href=\"https://hexo.io/\" target=\"_blank\">Hexo</a> | Theme by <a href=\"https://github.com/unclay/hexo-theme-eleven\">Eleven</a>.\n</div>\n```\n\n## 页面样式\n\n注意：记得安装hexo-renderer-less\n\n```mel\nsource/css\n  ├── _partial   局部样式目录\n  ├       ├── header.less 头部样式\n  ├       ├── footer.less 底部样式\n  ├── _var.less less变量文件\n  └── style.less 入口样式文件\n```\n\n### 加载css文件\n\ncss/style.css会自动读取source/css/style.less文件，原理自己有空再看。\n\n##### blog/layout/_partial/head.ejs\n\n```html\n<head>\n  <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n  <title><%= config.title %></title>\n  <%- css('css/style.css') %>\n</head>\n```\n\n### 配置样式\n\n##### source/css/_var.less\n\n```less\n@mainTextColor: rgba(0, 0, 0, 0.75);\n@mainLinkColor: #368CCB;\n@mainBorderColor: #eee;\n```\n\n##### source/css/style.less\n\n```less\n@import '_var';\nhtml {\n  font-size: 16px;\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  color: @mainTextColor;\n}\n\na {\n  color: @mainTextColor;\n  text-decoration: none;\n}\n.main {\n  max-width: 720px;\n  margin: 40px auto 0;\n}\n\n@import '_partial/header';\n@import '_partial/footer';\n```\n\n##### source/css/_partial/header.less\n\n```less\n.header {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  padding: 0 1em;\n  justify-content: space-between;\n  border-bottom: 1px solid #e5e5e5;\n  background: #fff;\n  height: 40px;\n  line-height: 40px;\n  box-sizing: border-box;\n\n  .blog-title {\n    .logo {\n      font-size: 1.1em;\n    }\n  }\n\n  .menu {\n    margin: 0;\n    padding: 0;\n    font-size: .8em;\n\n    .menu-item {\n      display: inline-block;\n      padding: 0 .5em;\n    }\n\n    .menu-item-link {\n      display: inline-block;\n      color: rgba(0, 0, 0, 0.6);\n      text-decoration: none;\n\n      &:hover {\n        color: @mainLinkColor;\n      }\n    }\n  }\n}\n```\n\n##### source/css/_partial/footer.less\n\n```less\n.footer {\n  margin-top: 20px;\n  font-size: 0.8em;\n  line-height: 3em;\n  height: 3em;\n  border-top: 1px solid @mainBorderColor;\n  box-sizing: border-box;\n  text-align: center;\n  a {\n    color: @mainLinkColor;\n  }\n}\n```\n\n## 首页排版\n\n本人首页定位为文章列表页\n\n### 布局模板\n\n首页是文章聚合页，需要做分页，所以同时要新增一个分页模板\n\n##### layout/index.ejs\n\n```html\n<section class=\"posts\">\n  <% page.posts.each(function (post) { %>\n    <article class=\"post\">\n      <div class=\"post-title\">\n        <a class=\"post-title-link\" href=\"<%- url_for(post.path) %>\"><%= post.title %></a>\n      </div>\n      <div class=\"post-content\">\n        <%- post.excerpt %>\n      </div>\n      <div class=\"post-meta\">\n        <span class=\"post-time\"><%- date(post.date, \"YYYY-MM-DD\") %></span>\n      </div>\n    </article>\n  <% }) %>\n</section>\n<%- partial('_partial/paginator') %>\n```\n\n##### layout/_partial/paginator.ejs\n\n```html\n<% if (page.total > 1){ %>\n  <nav class=\"page-nav\">\n    <%- paginator({\n      prev_text: \"&laquo;&nbsp;上一页\",\n      next_text: \"下一页&nbsp;&raquo;\",\n    }) %>\n  </nav>\n<% } %>\n```\n\n### 布局样式\n\n新增首页、分页样式文件\n\n##### source/css/_partial/style.less\n\n```less\n/* 追加引入首页、分页样式 */\n@import 'index';\n@import '_partial/paginator';\n```\n\n##### source/css/index.less\n\n```less\n.post  {\n  padding: 40px 0;\n  + .post {\n    border-top: 1px solid @mainBorderColor;\n  }\n\n  .post-title {\n    font-size: 1.3em;\n  }\n\n  .post-meta {\n    margin-top: 15px;\n    font-size: 0.9em;\n    color: #aaa;\n  }\n\n  .post-content {\n    padding-top: 15px;\n    font-size: 1em;\n  }\n}\n```\n\n##### source/css/_partial/paginator.less\n\n```less\n.page-nav {\n  text-align: center;\n\n  .prev {\n    float: left;\n  }\n  .next {\n    float: right;\n  }\n  .extend {\n    &:hover {\n      color: @mainLinkColor;\n    }\n  }\n\n  .page-number {\n    padding: 6px 10px;\n    &.current {\n      color: @mainLinkColor;\n    }\n    &:hover {\n      color: @mainLinkColor;\n    }\n  }\n}\n```\n\n### 修改文章\n\n在hello world文章中插入查看更多分割代码，为了浏览分页效果，直接复制多十份hello world文件\n\n##### blog/source/_post/hello-world.md\n\n```md\n---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n<!-- more -->\n...\n```\n\n## 归档排版\n\n本人归档主要按年份时间线展示，同时增加按年份筛选分类\n\n### 布局模板\n\n##### layout/archive.ejs\n\n```html\n<section class=\"archive\">\n  <h3 class=\"title-archive\">导航</h3>\n  <ul class=\"archive-list\">\n    <a class=\"archive-link\" href=\"/archives/\">All</a>，\n    <%- list_archives({\n      type: 'yearly',\n      style: 'unordered list',\n      transform(post, count) {\n        return post;\n      }\n    }) %>\n  </ul> \n  <% var year%>\n  <% page.posts.each(function (post) { %>\n    <% post.year = date(post.date, \"YYYY\") %>\n    <% if (year > 0 && year !== post.year) { %>\n      </ul>\n    <% } %>\n    <% if (year !== post.year) { %>\n      <% year = post.year%>\n      <h3 class=\"title-archive\"><%=post.year%></h3>\n      <ul class=\"archive-list\">\n    <% } %>\n        <li class=\"post-item\">\n          <span class=\"post-date\"><%= date(post.date, \"YYYY/MM/DD\") %></span>&nbsp;\n          <a class=\"post-title\" href=\"<%- url_for(post.path) %>\"><%= post.title %></a>\n        </li>\n    <% if (!post.next) { %>\n      </ul>\n    <% } %>\n  <% }) %>\n</section>\n```\n\n### 布局样式\n\n新增归档样式文件\n\n##### source/css/style.less\n\n```less\n/* 追加引入归档样式 */\n@import 'archive';\n```\n\n##### source/css/archive.less\n\n```less\n.archive {\n  padding-top: 20px;\n  .archive-link {\n    font-size: 18px;\n    color: @mainLinkColor;\n  }\n  .archive-count {\n    padding: 0 5px;\n    font-size: 12px;\n    &:before {\n      content: '(';\n    }\n    &:after {\n      content: ')';\n    }\n  }\n}\n.title-archive {\n  font-size: 25px;\n  font-weight: bold;\n}\n.archive-list {\n  padding: 0 40px;\n}\n.post-item {\n  line-height: 28px;\n}\n.post-title {\n  color: @mainLinkColor;\n}\n```\n\n## 写在结尾\n\n到这里，博客主题基本成型，后面有空继续在撸个分类、标签\n","source":"_posts/hexo-theme.md","raw":"---\ntitle: Hexo折腾记\ndate: 2018-03-18\ntags:\n - hexo\ncategories:\n - lab\n---\n\n个人比较喜欢简约版的风格，\n再加上爱折腾，\n闲来没事就自己折腾个hexo主题。\n<!--more-->\n\n## 准备功课\n\n本人非设计师，对于自己来设计还是压力挺大的，于是寻找自己喜欢的风格加（ju）以（wei）吸（ji）收（yong）。\n\n参考主题：\n+ <a href=\"https://www.haomwei.com/\" target=\"_blank\">Maupassant</a>\n+ <a href=\"https://d2fan.com/\" target=\"_blank\">PolarBear</a>\n\n开始前你需要了解：\n+ 模板引擎\n+ css预处理器\n+ hexo文档\n\n为了减少折腾成本，选了自己熟悉的<a href=\"http://ejs.co/\">ejs</a>作为我的模板引擎，而css预处理器则选择<a href=\"http://lesscss.org/\">less</a>。ejs是hexo预安装的插件，less非预装的，所以需要自己手动安装。\n\n```bash\n# 当前目录/blog\n$ npm install hexo-renderer-less --save\n```\n\n## 目录结构\n\n首先假设自己的项目名为blog，主题名为blog-theme\n\n+ hexo目录 https://hexo.io/zh-cn/docs/setup.html\n+ themes目录 https://hexo.io/zh-cn/docs/themes.html\n\n```mel\nblog\n  ├── _config.yml\n  ├── package.json\n  ├── scaffolds\n  ├── source\n  ├   ├── _drafts\n  ├   └── _posts\n  ├── themes\n  └      └── blog-theme\n\nblog-theme\n  ├── _config.yml 主题配置文件\n  ├── languages   语言文件\n  ├── layout      布局文件，页面模板\n  ├── scripts     Hexo脚本\n  └── source      资源文件，主题的css、js、font等\n```\n\n### 设置生效主题\n\n##### blog/_config.yml\n\n```yml\n...\ntheme: hexo-blog\n...\n```\n\n### 配置主题导航\n\n##### blog-theme/_config.yml\n\n```yml\n# create time\nsince: 2017\n\n# header\nmenu:\n  Home: /\n  Archives: /archives/\n```\n\n## 页面模板\n\n### 模板前言\n\n开始前你需要了解的模板<a href=\"https://hexo.io/zh-cn/docs/variables.html\" target=\"_blank\">变量</a>：\n+ config blog的_config.yml文件\n+ theme  blog-theme的_config.yml文件\n+ <a href=\"https://hexo.io/zh-cn/docs/variables.html#页面变量\">page</a> hexo的页面内容，包含文章信息、分页信息、分类、标签、归档等信息\n\n由于需要公共的头尾部，需要通过layout来布局\n\n\n#### 主题模板\n\n```mel\nlayout\n  ├── _partial 局部模板目录\n  ├       ├── head.ejs head信息\n  ├       ├── header.ejs 头部模板\n  ├       └── footer.ejs 尾部模板\n  ├── layout.ejs  布局模板壳\n  └── index.ejs   首页\n  └── archive.ejs 归档\n```\n\n##### layout/layout.ejs\n\n```html\n<!DOCTYPE html>\n<html>\n  <%- partial('_partial/head') %>\n  <body>\n    <container class=\"container\">\n      <%- partial('_partial/header') %>\n      <main class=\"main\">\n        <%- body %>\n      </main>\n      <%- partial('_partial/footer') %>\n    </container>\n  </body>\n</html>\n```\n\n##### layout/index.ejs\n\n```html\nHello World\n```\n\n##### layout/archive.ejs\n\n```html\nHello World\n```\n\n##### layout/_partial/head.ejs\n\n```html\n<head>\n  <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n  <title><%= config.title %></title>\n</head>\n```\n\n##### layout/_partial/header.ejs\n\n```html\n<header class=\"header\">\n  <div class=\"blog-title\">\n    <a href=\"<%- url_for() %>\" class=\"logo\"><%= config.title %></a>\n  </div>\n  <nav class=\"navbar\">\n    <ul class=\"menu\">\n      <% for (name in theme.menu) { %>\n        <li class=\"menu-item\">\n          <a href=\"<%- url_for(theme.menu[name]) %>\" class=\"menu-item-link\"><%- name %></a>\n        </li>\n      <% } %>\n    </ul>\n  </nav>\n</header>\n```\n\n##### layout/_partial/footer.ejs\n\n```html\n<div class=\"footer\">\n  Copyright © <%=theme.since%><% if (theme.since < new Date().getFullYear()) { %>\n    <%= ' - ' + new Date().getFullYear()%>\n  <% } %> <%=config.author%> | \n  Powered by <a href=\"https://hexo.io/\" target=\"_blank\">Hexo</a> | Theme by <a href=\"https://github.com/unclay/hexo-theme-eleven\">Eleven</a>.\n</div>\n```\n\n## 页面样式\n\n注意：记得安装hexo-renderer-less\n\n```mel\nsource/css\n  ├── _partial   局部样式目录\n  ├       ├── header.less 头部样式\n  ├       ├── footer.less 底部样式\n  ├── _var.less less变量文件\n  └── style.less 入口样式文件\n```\n\n### 加载css文件\n\ncss/style.css会自动读取source/css/style.less文件，原理自己有空再看。\n\n##### blog/layout/_partial/head.ejs\n\n```html\n<head>\n  <meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\">\n  <title><%= config.title %></title>\n  <%- css('css/style.css') %>\n</head>\n```\n\n### 配置样式\n\n##### source/css/_var.less\n\n```less\n@mainTextColor: rgba(0, 0, 0, 0.75);\n@mainLinkColor: #368CCB;\n@mainBorderColor: #eee;\n```\n\n##### source/css/style.less\n\n```less\n@import '_var';\nhtml {\n  font-size: 16px;\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  color: @mainTextColor;\n}\n\na {\n  color: @mainTextColor;\n  text-decoration: none;\n}\n.main {\n  max-width: 720px;\n  margin: 40px auto 0;\n}\n\n@import '_partial/header';\n@import '_partial/footer';\n```\n\n##### source/css/_partial/header.less\n\n```less\n.header {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  padding: 0 1em;\n  justify-content: space-between;\n  border-bottom: 1px solid #e5e5e5;\n  background: #fff;\n  height: 40px;\n  line-height: 40px;\n  box-sizing: border-box;\n\n  .blog-title {\n    .logo {\n      font-size: 1.1em;\n    }\n  }\n\n  .menu {\n    margin: 0;\n    padding: 0;\n    font-size: .8em;\n\n    .menu-item {\n      display: inline-block;\n      padding: 0 .5em;\n    }\n\n    .menu-item-link {\n      display: inline-block;\n      color: rgba(0, 0, 0, 0.6);\n      text-decoration: none;\n\n      &:hover {\n        color: @mainLinkColor;\n      }\n    }\n  }\n}\n```\n\n##### source/css/_partial/footer.less\n\n```less\n.footer {\n  margin-top: 20px;\n  font-size: 0.8em;\n  line-height: 3em;\n  height: 3em;\n  border-top: 1px solid @mainBorderColor;\n  box-sizing: border-box;\n  text-align: center;\n  a {\n    color: @mainLinkColor;\n  }\n}\n```\n\n## 首页排版\n\n本人首页定位为文章列表页\n\n### 布局模板\n\n首页是文章聚合页，需要做分页，所以同时要新增一个分页模板\n\n##### layout/index.ejs\n\n```html\n<section class=\"posts\">\n  <% page.posts.each(function (post) { %>\n    <article class=\"post\">\n      <div class=\"post-title\">\n        <a class=\"post-title-link\" href=\"<%- url_for(post.path) %>\"><%= post.title %></a>\n      </div>\n      <div class=\"post-content\">\n        <%- post.excerpt %>\n      </div>\n      <div class=\"post-meta\">\n        <span class=\"post-time\"><%- date(post.date, \"YYYY-MM-DD\") %></span>\n      </div>\n    </article>\n  <% }) %>\n</section>\n<%- partial('_partial/paginator') %>\n```\n\n##### layout/_partial/paginator.ejs\n\n```html\n<% if (page.total > 1){ %>\n  <nav class=\"page-nav\">\n    <%- paginator({\n      prev_text: \"&laquo;&nbsp;上一页\",\n      next_text: \"下一页&nbsp;&raquo;\",\n    }) %>\n  </nav>\n<% } %>\n```\n\n### 布局样式\n\n新增首页、分页样式文件\n\n##### source/css/_partial/style.less\n\n```less\n/* 追加引入首页、分页样式 */\n@import 'index';\n@import '_partial/paginator';\n```\n\n##### source/css/index.less\n\n```less\n.post  {\n  padding: 40px 0;\n  + .post {\n    border-top: 1px solid @mainBorderColor;\n  }\n\n  .post-title {\n    font-size: 1.3em;\n  }\n\n  .post-meta {\n    margin-top: 15px;\n    font-size: 0.9em;\n    color: #aaa;\n  }\n\n  .post-content {\n    padding-top: 15px;\n    font-size: 1em;\n  }\n}\n```\n\n##### source/css/_partial/paginator.less\n\n```less\n.page-nav {\n  text-align: center;\n\n  .prev {\n    float: left;\n  }\n  .next {\n    float: right;\n  }\n  .extend {\n    &:hover {\n      color: @mainLinkColor;\n    }\n  }\n\n  .page-number {\n    padding: 6px 10px;\n    &.current {\n      color: @mainLinkColor;\n    }\n    &:hover {\n      color: @mainLinkColor;\n    }\n  }\n}\n```\n\n### 修改文章\n\n在hello world文章中插入查看更多分割代码，为了浏览分页效果，直接复制多十份hello world文件\n\n##### blog/source/_post/hello-world.md\n\n```md\n---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n<!-- more -->\n...\n```\n\n## 归档排版\n\n本人归档主要按年份时间线展示，同时增加按年份筛选分类\n\n### 布局模板\n\n##### layout/archive.ejs\n\n```html\n<section class=\"archive\">\n  <h3 class=\"title-archive\">导航</h3>\n  <ul class=\"archive-list\">\n    <a class=\"archive-link\" href=\"/archives/\">All</a>，\n    <%- list_archives({\n      type: 'yearly',\n      style: 'unordered list',\n      transform(post, count) {\n        return post;\n      }\n    }) %>\n  </ul> \n  <% var year%>\n  <% page.posts.each(function (post) { %>\n    <% post.year = date(post.date, \"YYYY\") %>\n    <% if (year > 0 && year !== post.year) { %>\n      </ul>\n    <% } %>\n    <% if (year !== post.year) { %>\n      <% year = post.year%>\n      <h3 class=\"title-archive\"><%=post.year%></h3>\n      <ul class=\"archive-list\">\n    <% } %>\n        <li class=\"post-item\">\n          <span class=\"post-date\"><%= date(post.date, \"YYYY/MM/DD\") %></span>&nbsp;\n          <a class=\"post-title\" href=\"<%- url_for(post.path) %>\"><%= post.title %></a>\n        </li>\n    <% if (!post.next) { %>\n      </ul>\n    <% } %>\n  <% }) %>\n</section>\n```\n\n### 布局样式\n\n新增归档样式文件\n\n##### source/css/style.less\n\n```less\n/* 追加引入归档样式 */\n@import 'archive';\n```\n\n##### source/css/archive.less\n\n```less\n.archive {\n  padding-top: 20px;\n  .archive-link {\n    font-size: 18px;\n    color: @mainLinkColor;\n  }\n  .archive-count {\n    padding: 0 5px;\n    font-size: 12px;\n    &:before {\n      content: '(';\n    }\n    &:after {\n      content: ')';\n    }\n  }\n}\n.title-archive {\n  font-size: 25px;\n  font-weight: bold;\n}\n.archive-list {\n  padding: 0 40px;\n}\n.post-item {\n  line-height: 28px;\n}\n.post-title {\n  color: @mainLinkColor;\n}\n```\n\n## 写在结尾\n\n到这里，博客主题基本成型，后面有空继续在撸个分类、标签\n","slug":"hexo-theme","published":1,"updated":"2018-03-19T15:54:58.000Z","_id":"cjeyf0h5d0008uq2euh7m07a0","comments":1,"layout":"post","photos":[],"link":"","content":"<p>个人比较喜欢简约版的风格，<br>再加上爱折腾，<br>闲来没事就自己折腾个hexo主题。<br><a id=\"more\"></a></p>\n<h2 id=\"准备功课\"><a href=\"#准备功课\" class=\"headerlink\" title=\"准备功课\"></a>准备功课</h2><p>本人非设计师，对于自己来设计还是压力挺大的，于是寻找自己喜欢的风格加（ju）以（wei）吸（ji）收（yong）。</p>\n<p>参考主题：</p>\n<ul>\n<li><a href=\"https://www.haomwei.com/\" target=\"_blank\">Maupassant</a></li>\n<li><a href=\"https://d2fan.com/\" target=\"_blank\">PolarBear</a></li>\n</ul>\n<p>开始前你需要了解：</p>\n<ul>\n<li>模板引擎</li>\n<li>css预处理器</li>\n<li>hexo文档</li>\n</ul>\n<p>为了减少折腾成本，选了自己熟悉的<a href=\"http://ejs.co/\" target=\"_blank\" rel=\"noopener\">ejs</a>作为我的模板引擎，而css预处理器则选择<a href=\"http://lesscss.org/\" target=\"_blank\" rel=\"noopener\">less</a>。ejs是hexo预安装的插件，less非预装的，所以需要自己手动安装。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 当前目录/blog</span></span><br><span class=\"line\">$ npm install hexo-renderer-less --save</span><br></pre></td></tr></table></figure>\n<h2 id=\"目录结构\"><a href=\"#目录结构\" class=\"headerlink\" title=\"目录结构\"></a>目录结构</h2><p>首先假设自己的项目名为blog，主题名为blog-theme</p>\n<ul>\n<li>hexo目录 <a href=\"https://hexo.io/zh-cn/docs/setup.html\" target=\"_blank\" rel=\"noopener\">https://hexo.io/zh-cn/docs/setup.html</a></li>\n<li>themes目录 <a href=\"https://hexo.io/zh-cn/docs/themes.html\" target=\"_blank\" rel=\"noopener\">https://hexo.io/zh-cn/docs/themes.html</a></li>\n</ul>\n<figure class=\"highlight mel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">blog</span><br><span class=\"line\">  ├── _config.yml</span><br><span class=\"line\">  ├── package.json</span><br><span class=\"line\">  ├── scaffolds</span><br><span class=\"line\">  ├── <span class=\"keyword\">source</span></span><br><span class=\"line\">  ├   ├── _drafts</span><br><span class=\"line\">  ├   └── _posts</span><br><span class=\"line\">  ├── themes</span><br><span class=\"line\">  └      └── blog-theme</span><br><span class=\"line\"></span><br><span class=\"line\">blog-theme</span><br><span class=\"line\">  ├── _config.yml 主题配置文件</span><br><span class=\"line\">  ├── languages   语言文件</span><br><span class=\"line\">  ├── <span class=\"keyword\">layout</span>      布局文件，页面模板</span><br><span class=\"line\">  ├── scripts     Hexo脚本</span><br><span class=\"line\">  └── <span class=\"keyword\">source</span>      资源文件，主题的css、js、font等</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置生效主题\"><a href=\"#设置生效主题\" class=\"headerlink\" title=\"设置生效主题\"></a>设置生效主题</h3><h5 id=\"blog-config-yml\"><a href=\"#blog-config-yml\" class=\"headerlink\" title=\"blog/_config.yml\"></a>blog/_config.yml</h5><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">...</span></span><br><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">hexo-blog</span></span><br><span class=\"line\"><span class=\"string\">...</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"配置主题导航\"><a href=\"#配置主题导航\" class=\"headerlink\" title=\"配置主题导航\"></a>配置主题导航</h3><h5 id=\"blog-theme-config-yml\"><a href=\"#blog-theme-config-yml\" class=\"headerlink\" title=\"blog-theme/_config.yml\"></a>blog-theme/_config.yml</h5><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># create time</span></span><br><span class=\"line\"><span class=\"attr\">since:</span> <span class=\"number\">2017</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># header</span></span><br><span class=\"line\"><span class=\"attr\">menu:</span></span><br><span class=\"line\"><span class=\"attr\">  Home:</span> <span class=\"string\">/</span></span><br><span class=\"line\"><span class=\"attr\">  Archives:</span> <span class=\"string\">/archives/</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"页面模板\"><a href=\"#页面模板\" class=\"headerlink\" title=\"页面模板\"></a>页面模板</h2><h3 id=\"模板前言\"><a href=\"#模板前言\" class=\"headerlink\" title=\"模板前言\"></a>模板前言</h3><p>开始前你需要了解的模板<a href=\"https://hexo.io/zh-cn/docs/variables.html\" target=\"_blank\">变量</a>：</p>\n<ul>\n<li>config blog的_config.yml文件</li>\n<li>theme  blog-theme的_config.yml文件</li>\n<li><a href=\"https://hexo.io/zh-cn/docs/variables.html#页面变量\" target=\"_blank\" rel=\"noopener\">page</a> hexo的页面内容，包含文章信息、分页信息、分类、标签、归档等信息</li>\n</ul>\n<p>由于需要公共的头尾部，需要通过layout来布局</p>\n<h4 id=\"主题模板\"><a href=\"#主题模板\" class=\"headerlink\" title=\"主题模板\"></a>主题模板</h4><figure class=\"highlight mel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">layout</span></span><br><span class=\"line\">  ├── _partial 局部模板目录</span><br><span class=\"line\">  ├       ├── head.ejs head信息</span><br><span class=\"line\">  ├       ├── header.ejs 头部模板</span><br><span class=\"line\">  ├       └── footer.ejs 尾部模板</span><br><span class=\"line\">  ├── <span class=\"keyword\">layout</span>.ejs  布局模板壳</span><br><span class=\"line\">  └── index.ejs   首页</span><br><span class=\"line\">  └── archive.ejs 归档</span><br></pre></td></tr></table></figure>\n<h5 id=\"layout-layout-ejs\"><a href=\"#layout-layout-ejs\" class=\"headerlink\" title=\"layout/layout.ejs\"></a>layout/layout.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">partial</span>('<span class=\"attr\">_partial</span>/<span class=\"attr\">head</span>') %&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">container</span> <span class=\"attr\">class</span>=<span class=\"string\">\"container\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">partial</span>('<span class=\"attr\">_partial</span>/<span class=\"attr\">header</span>') %&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">main</span> <span class=\"attr\">class</span>=<span class=\"string\">\"main\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">body</span> %&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">partial</span>('<span class=\"attr\">_partial</span>/<span class=\"attr\">footer</span>') %&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">container</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"layout-index-ejs\"><a href=\"#layout-index-ejs\" class=\"headerlink\" title=\"layout/index.ejs\"></a>layout/index.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hello World</span><br></pre></td></tr></table></figure>\n<h5 id=\"layout-archive-ejs\"><a href=\"#layout-archive-ejs\" class=\"headerlink\" title=\"layout/archive.ejs\"></a>layout/archive.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hello World</span><br></pre></td></tr></table></figure>\n<h5 id=\"layout-partial-head-ejs\"><a href=\"#layout-partial-head-ejs\" class=\"headerlink\" title=\"layout/_partial/head.ejs\"></a>layout/_partial/head.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"content-type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=utf-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">config.title</span> %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"layout-partial-header-ejs\"><a href=\"#layout-partial-header-ejs\" class=\"headerlink\" title=\"layout/_partial/header.ejs\"></a>layout/_partial/header.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">header</span> <span class=\"attr\">class</span>=<span class=\"string\">\"header\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"blog-title\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&lt;%- url_for() %&gt;\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"logo\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">config.title</span> %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">nav</span> <span class=\"attr\">class</span>=<span class=\"string\">\"navbar\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">\"menu\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">for</span> (<span class=\"attr\">name</span> <span class=\"attr\">in</span> <span class=\"attr\">theme.menu</span>) &#123; %&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"menu-item\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&lt;%- url_for(theme.menu[name]) %&gt;\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"menu-item-link\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">name</span> %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">%</span> &#125; %&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">header</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"layout-partial-footer-ejs\"><a href=\"#layout-partial-footer-ejs\" class=\"headerlink\" title=\"layout/_partial/footer.ejs\"></a>layout/_partial/footer.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"footer\"</span>&gt;</span></span><br><span class=\"line\">  Copyright © &lt;%=theme.since%&gt;&lt;% if (theme.since &lt; new Date().getFullYear()) &#123; %&gt;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%=</span> ' <span class=\"attr\">-</span> ' + <span class=\"attr\">new</span> <span class=\"attr\">Date</span>()<span class=\"attr\">.getFullYear</span>()%&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%</span> &#125; %&gt;</span> <span class=\"tag\">&lt;<span class=\"name\">%=config.author%</span>&gt;</span> | </span><br><span class=\"line\">  Powered by <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"https://hexo.io/\"</span> <span class=\"attr\">target</span>=<span class=\"string\">\"_blank\"</span>&gt;</span>Hexo<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span> | Theme by <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"https://github.com/unclay/hexo-theme-eleven\"</span>&gt;</span>Eleven<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span>.</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"页面样式\"><a href=\"#页面样式\" class=\"headerlink\" title=\"页面样式\"></a>页面样式</h2><p>注意：记得安装hexo-renderer-less</p>\n<figure class=\"highlight mel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">source</span>/css</span><br><span class=\"line\">  ├── _partial   局部样式目录</span><br><span class=\"line\">  ├       ├── header.less 头部样式</span><br><span class=\"line\">  ├       ├── footer.less 底部样式</span><br><span class=\"line\">  ├── _var.less less变量文件</span><br><span class=\"line\">  └── style.less 入口样式文件</span><br></pre></td></tr></table></figure>\n<h3 id=\"加载css文件\"><a href=\"#加载css文件\" class=\"headerlink\" title=\"加载css文件\"></a>加载css文件</h3><p>css/style.css会自动读取source/css/style.less文件，原理自己有空再看。</p>\n<h5 id=\"blog-layout-partial-head-ejs\"><a href=\"#blog-layout-partial-head-ejs\" class=\"headerlink\" title=\"blog/layout/_partial/head.ejs\"></a>blog/layout/_partial/head.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"content-type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=utf-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">config.title</span> %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">css</span>('<span class=\"attr\">css</span>/<span class=\"attr\">style.css</span>') %&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"配置样式\"><a href=\"#配置样式\" class=\"headerlink\" title=\"配置样式\"></a>配置样式</h3><h5 id=\"source-css-var-less\"><a href=\"#source-css-var-less\" class=\"headerlink\" title=\"source/css/_var.less\"></a>source/css/_var.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">@mainTextColor:</span> rgba(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.75</span>);</span><br><span class=\"line\"><span class=\"variable\">@mainLinkColor:</span> <span class=\"number\">#368CCB</span>;</span><br><span class=\"line\"><span class=\"variable\">@mainBorderColor:</span> <span class=\"number\">#eee</span>;</span><br></pre></td></tr></table></figure>\n<h5 id=\"source-css-style-less\"><a href=\"#source-css-style-less\" class=\"headerlink\" title=\"source/css/style.less\"></a>source/css/style.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'_var'</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">html</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">16px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">box-sizing</span>: border-box;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"variable\">@mainTextColor</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"variable\">@mainTextColor</span>;</span><br><span class=\"line\">  <span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.main</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">max-width</span>: <span class=\"number\">720px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">40px</span> auto <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'_partial/header'</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'_partial/footer'</span>;</span><br></pre></td></tr></table></figure>\n<h5 id=\"source-css-partial-header-less\"><a href=\"#source-css-partial-header-less\" class=\"headerlink\" title=\"source/css/_partial/header.less\"></a>source/css/_partial/header.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.header</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">right</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0</span> <span class=\"number\">1em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">justify-content</span>: space-between;</span><br><span class=\"line\">  <span class=\"attribute\">border-bottom</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#e5e5e5</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">box-sizing</span>: border-box;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.blog-title</span> &#123;</span><br><span class=\"line\">    <span class=\"selector-class\">.logo</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">font-size</span>: <span class=\"number\">1.1em</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.menu</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: .<span class=\"number\">8em</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"selector-class\">.menu-item</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">0</span> .<span class=\"number\">5em</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"selector-class\">.menu-item-link</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">      <span class=\"attribute\">color</span>: rgba(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.6</span>);</span><br><span class=\"line\">      <span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"selector-tag\">&amp;</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">color</span>: <span class=\"variable\">@mainLinkColor</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"source-css-partial-footer-less\"><a href=\"#source-css-partial-footer-less\" class=\"headerlink\" title=\"source/css/_partial/footer.less\"></a>source/css/_partial/footer.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.footer</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin-top</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">0.8em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">3em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">3em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-top</span>: <span class=\"number\">1px</span> solid <span class=\"variable\">@mainBorderColor</span>;</span><br><span class=\"line\">  <span class=\"attribute\">box-sizing</span>: border-box;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">  <span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"variable\">@mainLinkColor</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"首页排版\"><a href=\"#首页排版\" class=\"headerlink\" title=\"首页排版\"></a>首页排版</h2><p>本人首页定位为文章列表页</p>\n<h3 id=\"布局模板\"><a href=\"#布局模板\" class=\"headerlink\" title=\"布局模板\"></a>布局模板</h3><p>首页是文章聚合页，需要做分页，所以同时要新增一个分页模板</p>\n<h5 id=\"layout-index-ejs-1\"><a href=\"#layout-index-ejs-1\" class=\"headerlink\" title=\"layout/index.ejs\"></a>layout/index.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">section</span> <span class=\"attr\">class</span>=<span class=\"string\">\"posts\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">page.posts.each</span>(<span class=\"attr\">function</span> (<span class=\"attr\">post</span>) &#123; %&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">article</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-title\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-title-link\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&lt;%- url_for(post.path) %&gt;\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">post.title</span> %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-content\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">post.excerpt</span> %&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-meta\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-time\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">date</span>(<span class=\"attr\">post.date</span>, \"<span class=\"attr\">YYYY-MM-DD</span>\") %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">article</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%</span> &#125;) %&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">partial</span>('<span class=\"attr\">_partial</span>/<span class=\"attr\">paginator</span>') %&gt;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"layout-partial-paginator-ejs\"><a href=\"#layout-partial-paginator-ejs\" class=\"headerlink\" title=\"layout/_partial/paginator.ejs\"></a>layout/_partial/paginator.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">if</span> (<span class=\"attr\">page.total</span> &gt;</span> 1)&#123; %&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">nav</span> <span class=\"attr\">class</span>=<span class=\"string\">\"page-nav\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">paginator</span>(&#123;</span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">prev_text:</span> \"&amp;<span class=\"attr\">laquo</span>;&amp;<span class=\"attr\">nbsp</span>;上一页\",</span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">next_text:</span> \"下一页&amp;<span class=\"attr\">nbsp</span>;&amp;<span class=\"attr\">raquo</span>;\",</span></span><br><span class=\"line\"><span class=\"tag\">    &#125;) %&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%</span> &#125; %&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"布局样式\"><a href=\"#布局样式\" class=\"headerlink\" title=\"布局样式\"></a>布局样式</h3><p>新增首页、分页样式文件</p>\n<h5 id=\"source-css-partial-style-less\"><a href=\"#source-css-partial-style-less\" class=\"headerlink\" title=\"source/css/_partial/style.less\"></a>source/css/_partial/style.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 追加引入首页、分页样式 */</span></span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'index'</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'_partial/paginator'</span>;</span><br></pre></td></tr></table></figure>\n<h5 id=\"source-css-index-less\"><a href=\"#source-css-index-less\" class=\"headerlink\" title=\"source/css/index.less\"></a>source/css/index.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.post</span>  &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">40px</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">  + <span class=\"selector-class\">.post</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border-top</span>: <span class=\"number\">1px</span> solid <span class=\"variable\">@mainBorderColor</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.post-title</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1.3em</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.post-meta</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">15px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">0.9em</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#aaa</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.post-content</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding-top</span>: <span class=\"number\">15px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1em</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"source-css-partial-paginator-less\"><a href=\"#source-css-partial-paginator-less\" class=\"headerlink\" title=\"source/css/_partial/paginator.less\"></a>source/css/_partial/paginator.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.page-nav</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.prev</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-class\">.next</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">float</span>: right;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-class\">.extend</span> &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">&amp;</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">color</span>: <span class=\"variable\">@mainLinkColor</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.page-number</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">6px</span> <span class=\"number\">10px</span>;</span><br><span class=\"line\">    <span class=\"selector-tag\">&amp;</span><span class=\"selector-class\">.current</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">color</span>: <span class=\"variable\">@mainLinkColor</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-tag\">&amp;</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">color</span>: <span class=\"variable\">@mainLinkColor</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改文章\"><a href=\"#修改文章\" class=\"headerlink\" title=\"修改文章\"></a>修改文章</h3><p>在hello world文章中插入查看更多分割代码，为了浏览分页效果，直接复制多十份hello world文件</p>\n<h5 id=\"blog-source-post-hello-world-md\"><a href=\"#blog-source-post-hello-world-md\" class=\"headerlink\" title=\"blog/source/_post/hello-world.md\"></a>blog/source/_post/hello-world.md</h5><figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: Hello World</span><br><span class=\"line\">---</span><br><span class=\"line\">Welcome to [<span class=\"string\">Hexo</span>](<span class=\"link\">https://hexo.io/</span>)! This is your very first post. Check [<span class=\"string\">documentation</span>](<span class=\"link\">https://hexo.io/docs/</span>) for more info. If you get any problems when using Hexo, you can find the answer in [<span class=\"string\">troubleshooting</span>](<span class=\"link\">https://hexo.io/docs/troubleshooting.html</span>) or you can ask me on [<span class=\"string\">GitHub</span>](<span class=\"link\">https://github.com/hexojs/hexo/issues</span>).</span><br><span class=\"line\"><span class=\"xml\"><span class=\"comment\">&lt;!-- more --&gt;</span></span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h2 id=\"归档排版\"><a href=\"#归档排版\" class=\"headerlink\" title=\"归档排版\"></a>归档排版</h2><p>本人归档主要按年份时间线展示，同时增加按年份筛选分类</p>\n<h3 id=\"布局模板-1\"><a href=\"#布局模板-1\" class=\"headerlink\" title=\"布局模板\"></a>布局模板</h3><h5 id=\"layout-archive-ejs-1\"><a href=\"#layout-archive-ejs-1\" class=\"headerlink\" title=\"layout/archive.ejs\"></a>layout/archive.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">section</span> <span class=\"attr\">class</span>=<span class=\"string\">\"archive\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h3</span> <span class=\"attr\">class</span>=<span class=\"string\">\"title-archive\"</span>&gt;</span>导航<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">\"archive-list\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">\"archive-link\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"/archives/\"</span>&gt;</span>All<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span>，</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">list_archives</span>(&#123;</span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">type:</span> '<span class=\"attr\">yearly</span>',</span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">style:</span> '<span class=\"attr\">unordered</span> <span class=\"attr\">list</span>',</span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">transform</span>(<span class=\"attr\">post</span>, <span class=\"attr\">count</span>) &#123;</span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">return</span> <span class=\"attr\">post</span>;</span></span><br><span class=\"line\"><span class=\"tag\">      &#125;</span></span><br><span class=\"line\"><span class=\"tag\">    &#125;) %&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span> </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">var</span> <span class=\"attr\">year</span>%&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">page.posts.each</span>(<span class=\"attr\">function</span> (<span class=\"attr\">post</span>) &#123; %&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">post.year</span> = <span class=\"string\">date(post.date,</span> \"<span class=\"attr\">YYYY</span>\") %&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">if</span> (<span class=\"attr\">year</span> &gt;</span> 0 &amp;&amp; year !== post.year) &#123; %&gt;</span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%</span> &#125; %&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">if</span> (<span class=\"attr\">year</span> !== <span class=\"string\">post.year)</span> &#123; %&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">year</span> = <span class=\"string\">post.year%</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">h3</span> <span class=\"attr\">class</span>=<span class=\"string\">\"title-archive\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=post.year%</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">\"archive-list\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%</span> &#125; %&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-item\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-date\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">date</span>(<span class=\"attr\">post.date</span>, \"<span class=\"attr\">YYYY</span>/<span class=\"attr\">MM</span>/<span class=\"attr\">DD</span>\") %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>&amp;nbsp;</span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-title\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&lt;%- url_for(post.path) %&gt;\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">post.title</span> %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">if</span> (!<span class=\"attr\">post.next</span>) &#123; %&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%</span> &#125; %&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%</span> &#125;) %&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"布局样式-1\"><a href=\"#布局样式-1\" class=\"headerlink\" title=\"布局样式\"></a>布局样式</h3><p>新增归档样式文件</p>\n<h5 id=\"source-css-style-less-1\"><a href=\"#source-css-style-less-1\" class=\"headerlink\" title=\"source/css/style.less\"></a>source/css/style.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 追加引入归档样式 */</span></span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'archive'</span>;</span><br></pre></td></tr></table></figure>\n<h5 id=\"source-css-archive-less\"><a href=\"#source-css-archive-less\" class=\"headerlink\" title=\"source/css/archive.less\"></a>source/css/archive.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.archive</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding-top</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">  <span class=\"selector-class\">.archive-link</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">18px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"variable\">@mainLinkColor</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-class\">.archive-count</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span> <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">12px</span>;</span><br><span class=\"line\">    <span class=\"selector-tag\">&amp;</span><span class=\"selector-pseudo\">:before</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">content</span>: <span class=\"string\">'('</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-tag\">&amp;</span><span class=\"selector-pseudo\">:after</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">content</span>: <span class=\"string\">')'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.title-archive</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">25px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-weight</span>: bold;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.archive-list</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0</span> <span class=\"number\">40px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.post-item</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">28px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.post-title</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"variable\">@mainLinkColor</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"写在结尾\"><a href=\"#写在结尾\" class=\"headerlink\" title=\"写在结尾\"></a>写在结尾</h2><p>到这里，博客主题基本成型，后面有空继续在撸个分类、标签</p>\n","site":{"data":{}},"excerpt":"<p>个人比较喜欢简约版的风格，<br>再加上爱折腾，<br>闲来没事就自己折腾个hexo主题。<br>","more":"</p>\n<h2 id=\"准备功课\"><a href=\"#准备功课\" class=\"headerlink\" title=\"准备功课\"></a>准备功课</h2><p>本人非设计师，对于自己来设计还是压力挺大的，于是寻找自己喜欢的风格加（ju）以（wei）吸（ji）收（yong）。</p>\n<p>参考主题：</p>\n<ul>\n<li><a href=\"https://www.haomwei.com/\" target=\"_blank\">Maupassant</a></li>\n<li><a href=\"https://d2fan.com/\" target=\"_blank\">PolarBear</a></li>\n</ul>\n<p>开始前你需要了解：</p>\n<ul>\n<li>模板引擎</li>\n<li>css预处理器</li>\n<li>hexo文档</li>\n</ul>\n<p>为了减少折腾成本，选了自己熟悉的<a href=\"http://ejs.co/\" target=\"_blank\" rel=\"noopener\">ejs</a>作为我的模板引擎，而css预处理器则选择<a href=\"http://lesscss.org/\" target=\"_blank\" rel=\"noopener\">less</a>。ejs是hexo预安装的插件，less非预装的，所以需要自己手动安装。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 当前目录/blog</span></span><br><span class=\"line\">$ npm install hexo-renderer-less --save</span><br></pre></td></tr></table></figure>\n<h2 id=\"目录结构\"><a href=\"#目录结构\" class=\"headerlink\" title=\"目录结构\"></a>目录结构</h2><p>首先假设自己的项目名为blog，主题名为blog-theme</p>\n<ul>\n<li>hexo目录 <a href=\"https://hexo.io/zh-cn/docs/setup.html\" target=\"_blank\" rel=\"noopener\">https://hexo.io/zh-cn/docs/setup.html</a></li>\n<li>themes目录 <a href=\"https://hexo.io/zh-cn/docs/themes.html\" target=\"_blank\" rel=\"noopener\">https://hexo.io/zh-cn/docs/themes.html</a></li>\n</ul>\n<figure class=\"highlight mel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">blog</span><br><span class=\"line\">  ├── _config.yml</span><br><span class=\"line\">  ├── package.json</span><br><span class=\"line\">  ├── scaffolds</span><br><span class=\"line\">  ├── <span class=\"keyword\">source</span></span><br><span class=\"line\">  ├   ├── _drafts</span><br><span class=\"line\">  ├   └── _posts</span><br><span class=\"line\">  ├── themes</span><br><span class=\"line\">  └      └── blog-theme</span><br><span class=\"line\"></span><br><span class=\"line\">blog-theme</span><br><span class=\"line\">  ├── _config.yml 主题配置文件</span><br><span class=\"line\">  ├── languages   语言文件</span><br><span class=\"line\">  ├── <span class=\"keyword\">layout</span>      布局文件，页面模板</span><br><span class=\"line\">  ├── scripts     Hexo脚本</span><br><span class=\"line\">  └── <span class=\"keyword\">source</span>      资源文件，主题的css、js、font等</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置生效主题\"><a href=\"#设置生效主题\" class=\"headerlink\" title=\"设置生效主题\"></a>设置生效主题</h3><h5 id=\"blog-config-yml\"><a href=\"#blog-config-yml\" class=\"headerlink\" title=\"blog/_config.yml\"></a>blog/_config.yml</h5><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">...</span></span><br><span class=\"line\"><span class=\"attr\">theme:</span> <span class=\"string\">hexo-blog</span></span><br><span class=\"line\"><span class=\"string\">...</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"配置主题导航\"><a href=\"#配置主题导航\" class=\"headerlink\" title=\"配置主题导航\"></a>配置主题导航</h3><h5 id=\"blog-theme-config-yml\"><a href=\"#blog-theme-config-yml\" class=\"headerlink\" title=\"blog-theme/_config.yml\"></a>blog-theme/_config.yml</h5><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># create time</span></span><br><span class=\"line\"><span class=\"attr\">since:</span> <span class=\"number\">2017</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># header</span></span><br><span class=\"line\"><span class=\"attr\">menu:</span></span><br><span class=\"line\"><span class=\"attr\">  Home:</span> <span class=\"string\">/</span></span><br><span class=\"line\"><span class=\"attr\">  Archives:</span> <span class=\"string\">/archives/</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"页面模板\"><a href=\"#页面模板\" class=\"headerlink\" title=\"页面模板\"></a>页面模板</h2><h3 id=\"模板前言\"><a href=\"#模板前言\" class=\"headerlink\" title=\"模板前言\"></a>模板前言</h3><p>开始前你需要了解的模板<a href=\"https://hexo.io/zh-cn/docs/variables.html\" target=\"_blank\">变量</a>：</p>\n<ul>\n<li>config blog的_config.yml文件</li>\n<li>theme  blog-theme的_config.yml文件</li>\n<li><a href=\"https://hexo.io/zh-cn/docs/variables.html#页面变量\" target=\"_blank\" rel=\"noopener\">page</a> hexo的页面内容，包含文章信息、分页信息、分类、标签、归档等信息</li>\n</ul>\n<p>由于需要公共的头尾部，需要通过layout来布局</p>\n<h4 id=\"主题模板\"><a href=\"#主题模板\" class=\"headerlink\" title=\"主题模板\"></a>主题模板</h4><figure class=\"highlight mel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">layout</span></span><br><span class=\"line\">  ├── _partial 局部模板目录</span><br><span class=\"line\">  ├       ├── head.ejs head信息</span><br><span class=\"line\">  ├       ├── header.ejs 头部模板</span><br><span class=\"line\">  ├       └── footer.ejs 尾部模板</span><br><span class=\"line\">  ├── <span class=\"keyword\">layout</span>.ejs  布局模板壳</span><br><span class=\"line\">  └── index.ejs   首页</span><br><span class=\"line\">  └── archive.ejs 归档</span><br></pre></td></tr></table></figure>\n<h5 id=\"layout-layout-ejs\"><a href=\"#layout-layout-ejs\" class=\"headerlink\" title=\"layout/layout.ejs\"></a>layout/layout.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">partial</span>('<span class=\"attr\">_partial</span>/<span class=\"attr\">head</span>') %&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">container</span> <span class=\"attr\">class</span>=<span class=\"string\">\"container\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">partial</span>('<span class=\"attr\">_partial</span>/<span class=\"attr\">header</span>') %&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">main</span> <span class=\"attr\">class</span>=<span class=\"string\">\"main\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">body</span> %&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">main</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">partial</span>('<span class=\"attr\">_partial</span>/<span class=\"attr\">footer</span>') %&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">container</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"layout-index-ejs\"><a href=\"#layout-index-ejs\" class=\"headerlink\" title=\"layout/index.ejs\"></a>layout/index.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hello World</span><br></pre></td></tr></table></figure>\n<h5 id=\"layout-archive-ejs\"><a href=\"#layout-archive-ejs\" class=\"headerlink\" title=\"layout/archive.ejs\"></a>layout/archive.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hello World</span><br></pre></td></tr></table></figure>\n<h5 id=\"layout-partial-head-ejs\"><a href=\"#layout-partial-head-ejs\" class=\"headerlink\" title=\"layout/_partial/head.ejs\"></a>layout/_partial/head.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"content-type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=utf-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">config.title</span> %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"layout-partial-header-ejs\"><a href=\"#layout-partial-header-ejs\" class=\"headerlink\" title=\"layout/_partial/header.ejs\"></a>layout/_partial/header.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">header</span> <span class=\"attr\">class</span>=<span class=\"string\">\"header\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"blog-title\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&lt;%- url_for() %&gt;\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"logo\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">config.title</span> %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">nav</span> <span class=\"attr\">class</span>=<span class=\"string\">\"navbar\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">\"menu\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">for</span> (<span class=\"attr\">name</span> <span class=\"attr\">in</span> <span class=\"attr\">theme.menu</span>) &#123; %&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"menu-item\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&lt;%- url_for(theme.menu[name]) %&gt;\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"menu-item-link\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">name</span> %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">%</span> &#125; %&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">header</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"layout-partial-footer-ejs\"><a href=\"#layout-partial-footer-ejs\" class=\"headerlink\" title=\"layout/_partial/footer.ejs\"></a>layout/_partial/footer.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"footer\"</span>&gt;</span></span><br><span class=\"line\">  Copyright © &lt;%=theme.since%&gt;&lt;% if (theme.since &lt; new Date().getFullYear()) &#123; %&gt;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%=</span> ' <span class=\"attr\">-</span> ' + <span class=\"attr\">new</span> <span class=\"attr\">Date</span>()<span class=\"attr\">.getFullYear</span>()%&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%</span> &#125; %&gt;</span> <span class=\"tag\">&lt;<span class=\"name\">%=config.author%</span>&gt;</span> | </span><br><span class=\"line\">  Powered by <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"https://hexo.io/\"</span> <span class=\"attr\">target</span>=<span class=\"string\">\"_blank\"</span>&gt;</span>Hexo<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span> | Theme by <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"https://github.com/unclay/hexo-theme-eleven\"</span>&gt;</span>Eleven<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span>.</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"页面样式\"><a href=\"#页面样式\" class=\"headerlink\" title=\"页面样式\"></a>页面样式</h2><p>注意：记得安装hexo-renderer-less</p>\n<figure class=\"highlight mel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">source</span>/css</span><br><span class=\"line\">  ├── _partial   局部样式目录</span><br><span class=\"line\">  ├       ├── header.less 头部样式</span><br><span class=\"line\">  ├       ├── footer.less 底部样式</span><br><span class=\"line\">  ├── _var.less less变量文件</span><br><span class=\"line\">  └── style.less 入口样式文件</span><br></pre></td></tr></table></figure>\n<h3 id=\"加载css文件\"><a href=\"#加载css文件\" class=\"headerlink\" title=\"加载css文件\"></a>加载css文件</h3><p>css/style.css会自动读取source/css/style.less文件，原理自己有空再看。</p>\n<h5 id=\"blog-layout-partial-head-ejs\"><a href=\"#blog-layout-partial-head-ejs\" class=\"headerlink\" title=\"blog/layout/_partial/head.ejs\"></a>blog/layout/_partial/head.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"content-type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=utf-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">config.title</span> %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">css</span>('<span class=\"attr\">css</span>/<span class=\"attr\">style.css</span>') %&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"配置样式\"><a href=\"#配置样式\" class=\"headerlink\" title=\"配置样式\"></a>配置样式</h3><h5 id=\"source-css-var-less\"><a href=\"#source-css-var-less\" class=\"headerlink\" title=\"source/css/_var.less\"></a>source/css/_var.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">@mainTextColor:</span> rgba(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.75</span>);</span><br><span class=\"line\"><span class=\"variable\">@mainLinkColor:</span> <span class=\"number\">#368CCB</span>;</span><br><span class=\"line\"><span class=\"variable\">@mainBorderColor:</span> <span class=\"number\">#eee</span>;</span><br></pre></td></tr></table></figure>\n<h5 id=\"source-css-style-less\"><a href=\"#source-css-style-less\" class=\"headerlink\" title=\"source/css/style.less\"></a>source/css/style.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'_var'</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">html</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">16px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">box-sizing</span>: border-box;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"variable\">@mainTextColor</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"variable\">@mainTextColor</span>;</span><br><span class=\"line\">  <span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.main</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">max-width</span>: <span class=\"number\">720px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">40px</span> auto <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'_partial/header'</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'_partial/footer'</span>;</span><br></pre></td></tr></table></figure>\n<h5 id=\"source-css-partial-header-less\"><a href=\"#source-css-partial-header-less\" class=\"headerlink\" title=\"source/css/_partial/header.less\"></a>source/css/_partial/header.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.header</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">right</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0</span> <span class=\"number\">1em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">justify-content</span>: space-between;</span><br><span class=\"line\">  <span class=\"attribute\">border-bottom</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#e5e5e5</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">40px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">box-sizing</span>: border-box;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.blog-title</span> &#123;</span><br><span class=\"line\">    <span class=\"selector-class\">.logo</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">font-size</span>: <span class=\"number\">1.1em</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.menu</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: .<span class=\"number\">8em</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"selector-class\">.menu-item</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">0</span> .<span class=\"number\">5em</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"selector-class\">.menu-item-link</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">      <span class=\"attribute\">color</span>: rgba(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.6</span>);</span><br><span class=\"line\">      <span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"selector-tag\">&amp;</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">color</span>: <span class=\"variable\">@mainLinkColor</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"source-css-partial-footer-less\"><a href=\"#source-css-partial-footer-less\" class=\"headerlink\" title=\"source/css/_partial/footer.less\"></a>source/css/_partial/footer.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.footer</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin-top</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">0.8em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">3em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">3em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-top</span>: <span class=\"number\">1px</span> solid <span class=\"variable\">@mainBorderColor</span>;</span><br><span class=\"line\">  <span class=\"attribute\">box-sizing</span>: border-box;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\">  <span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"variable\">@mainLinkColor</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"首页排版\"><a href=\"#首页排版\" class=\"headerlink\" title=\"首页排版\"></a>首页排版</h2><p>本人首页定位为文章列表页</p>\n<h3 id=\"布局模板\"><a href=\"#布局模板\" class=\"headerlink\" title=\"布局模板\"></a>布局模板</h3><p>首页是文章聚合页，需要做分页，所以同时要新增一个分页模板</p>\n<h5 id=\"layout-index-ejs-1\"><a href=\"#layout-index-ejs-1\" class=\"headerlink\" title=\"layout/index.ejs\"></a>layout/index.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">section</span> <span class=\"attr\">class</span>=<span class=\"string\">\"posts\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">page.posts.each</span>(<span class=\"attr\">function</span> (<span class=\"attr\">post</span>) &#123; %&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">article</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post\"</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-title\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-title-link\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&lt;%- url_for(post.path) %&gt;\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">post.title</span> %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-content\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">post.excerpt</span> %&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-meta\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-time\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">date</span>(<span class=\"attr\">post.date</span>, \"<span class=\"attr\">YYYY-MM-DD</span>\") %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">article</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%</span> &#125;) %&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">partial</span>('<span class=\"attr\">_partial</span>/<span class=\"attr\">paginator</span>') %&gt;</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"layout-partial-paginator-ejs\"><a href=\"#layout-partial-paginator-ejs\" class=\"headerlink\" title=\"layout/_partial/paginator.ejs\"></a>layout/_partial/paginator.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">if</span> (<span class=\"attr\">page.total</span> &gt;</span> 1)&#123; %&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">nav</span> <span class=\"attr\">class</span>=<span class=\"string\">\"page-nav\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">paginator</span>(&#123;</span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">prev_text:</span> \"&amp;<span class=\"attr\">laquo</span>;&amp;<span class=\"attr\">nbsp</span>;上一页\",</span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">next_text:</span> \"下一页&amp;<span class=\"attr\">nbsp</span>;&amp;<span class=\"attr\">raquo</span>;\",</span></span><br><span class=\"line\"><span class=\"tag\">    &#125;) %&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">%</span> &#125; %&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"布局样式\"><a href=\"#布局样式\" class=\"headerlink\" title=\"布局样式\"></a>布局样式</h3><p>新增首页、分页样式文件</p>\n<h5 id=\"source-css-partial-style-less\"><a href=\"#source-css-partial-style-less\" class=\"headerlink\" title=\"source/css/_partial/style.less\"></a>source/css/_partial/style.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 追加引入首页、分页样式 */</span></span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'index'</span>;</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'_partial/paginator'</span>;</span><br></pre></td></tr></table></figure>\n<h5 id=\"source-css-index-less\"><a href=\"#source-css-index-less\" class=\"headerlink\" title=\"source/css/index.less\"></a>source/css/index.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.post</span>  &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">40px</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">  + <span class=\"selector-class\">.post</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border-top</span>: <span class=\"number\">1px</span> solid <span class=\"variable\">@mainBorderColor</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.post-title</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1.3em</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.post-meta</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">15px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">0.9em</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#aaa</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.post-content</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding-top</span>: <span class=\"number\">15px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1em</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"source-css-partial-paginator-less\"><a href=\"#source-css-partial-paginator-less\" class=\"headerlink\" title=\"source/css/_partial/paginator.less\"></a>source/css/_partial/paginator.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.page-nav</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: center;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.prev</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-class\">.next</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">float</span>: right;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-class\">.extend</span> &#123;</span><br><span class=\"line\">    <span class=\"selector-tag\">&amp;</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">color</span>: <span class=\"variable\">@mainLinkColor</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.page-number</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">6px</span> <span class=\"number\">10px</span>;</span><br><span class=\"line\">    <span class=\"selector-tag\">&amp;</span><span class=\"selector-class\">.current</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">color</span>: <span class=\"variable\">@mainLinkColor</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-tag\">&amp;</span><span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">color</span>: <span class=\"variable\">@mainLinkColor</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改文章\"><a href=\"#修改文章\" class=\"headerlink\" title=\"修改文章\"></a>修改文章</h3><p>在hello world文章中插入查看更多分割代码，为了浏览分页效果，直接复制多十份hello world文件</p>\n<h5 id=\"blog-source-post-hello-world-md\"><a href=\"#blog-source-post-hello-world-md\" class=\"headerlink\" title=\"blog/source/_post/hello-world.md\"></a>blog/source/_post/hello-world.md</h5><figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\">title: Hello World</span><br><span class=\"line\">---</span><br><span class=\"line\">Welcome to [<span class=\"string\">Hexo</span>](<span class=\"link\">https://hexo.io/</span>)! This is your very first post. Check [<span class=\"string\">documentation</span>](<span class=\"link\">https://hexo.io/docs/</span>) for more info. If you get any problems when using Hexo, you can find the answer in [<span class=\"string\">troubleshooting</span>](<span class=\"link\">https://hexo.io/docs/troubleshooting.html</span>) or you can ask me on [<span class=\"string\">GitHub</span>](<span class=\"link\">https://github.com/hexojs/hexo/issues</span>).</span><br><span class=\"line\"><span class=\"xml\"><span class=\"comment\">&lt;!-- more --&gt;</span></span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h2 id=\"归档排版\"><a href=\"#归档排版\" class=\"headerlink\" title=\"归档排版\"></a>归档排版</h2><p>本人归档主要按年份时间线展示，同时增加按年份筛选分类</p>\n<h3 id=\"布局模板-1\"><a href=\"#布局模板-1\" class=\"headerlink\" title=\"布局模板\"></a>布局模板</h3><h5 id=\"layout-archive-ejs-1\"><a href=\"#layout-archive-ejs-1\" class=\"headerlink\" title=\"layout/archive.ejs\"></a>layout/archive.ejs</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">section</span> <span class=\"attr\">class</span>=<span class=\"string\">\"archive\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h3</span> <span class=\"attr\">class</span>=<span class=\"string\">\"title-archive\"</span>&gt;</span>导航<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">\"archive-list\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">\"archive-link\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"/archives/\"</span>&gt;</span>All<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span>，</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%-</span> <span class=\"attr\">list_archives</span>(&#123;</span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">type:</span> '<span class=\"attr\">yearly</span>',</span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">style:</span> '<span class=\"attr\">unordered</span> <span class=\"attr\">list</span>',</span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">transform</span>(<span class=\"attr\">post</span>, <span class=\"attr\">count</span>) &#123;</span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">return</span> <span class=\"attr\">post</span>;</span></span><br><span class=\"line\"><span class=\"tag\">      &#125;</span></span><br><span class=\"line\"><span class=\"tag\">    &#125;) %&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span> </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">var</span> <span class=\"attr\">year</span>%&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">page.posts.each</span>(<span class=\"attr\">function</span> (<span class=\"attr\">post</span>) &#123; %&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">post.year</span> = <span class=\"string\">date(post.date,</span> \"<span class=\"attr\">YYYY</span>\") %&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">if</span> (<span class=\"attr\">year</span> &gt;</span> 0 &amp;&amp; year !== post.year) &#123; %&gt;</span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%</span> &#125; %&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">if</span> (<span class=\"attr\">year</span> !== <span class=\"string\">post.year)</span> &#123; %&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">year</span> = <span class=\"string\">post.year%</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">h3</span> <span class=\"attr\">class</span>=<span class=\"string\">\"title-archive\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=post.year%</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">\"archive-list\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%</span> &#125; %&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-item\"</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-date\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">date</span>(<span class=\"attr\">post.date</span>, \"<span class=\"attr\">YYYY</span>/<span class=\"attr\">MM</span>/<span class=\"attr\">DD</span>\") %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>&amp;nbsp;</span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">\"post-title\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&lt;%- url_for(post.path) %&gt;\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">%=</span> <span class=\"attr\">post.title</span> %&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%</span> <span class=\"attr\">if</span> (!<span class=\"attr\">post.next</span>) &#123; %&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">%</span> &#125; %&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">%</span> &#125;) %&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"布局样式-1\"><a href=\"#布局样式-1\" class=\"headerlink\" title=\"布局样式\"></a>布局样式</h3><p>新增归档样式文件</p>\n<h5 id=\"source-css-style-less-1\"><a href=\"#source-css-style-less-1\" class=\"headerlink\" title=\"source/css/style.less\"></a>source/css/style.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* 追加引入归档样式 */</span></span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">'archive'</span>;</span><br></pre></td></tr></table></figure>\n<h5 id=\"source-css-archive-less\"><a href=\"#source-css-archive-less\" class=\"headerlink\" title=\"source/css/archive.less\"></a>source/css/archive.less</h5><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.archive</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding-top</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">  <span class=\"selector-class\">.archive-link</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">18px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"variable\">@mainLinkColor</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-class\">.archive-count</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span> <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">12px</span>;</span><br><span class=\"line\">    <span class=\"selector-tag\">&amp;</span><span class=\"selector-pseudo\">:before</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">content</span>: <span class=\"string\">'('</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"selector-tag\">&amp;</span><span class=\"selector-pseudo\">:after</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">content</span>: <span class=\"string\">')'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.title-archive</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">25px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-weight</span>: bold;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.archive-list</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0</span> <span class=\"number\">40px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.post-item</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">28px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.post-title</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"variable\">@mainLinkColor</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"写在结尾\"><a href=\"#写在结尾\" class=\"headerlink\" title=\"写在结尾\"></a>写在结尾</h2><p>到这里，博客主题基本成型，后面有空继续在撸个分类、标签</p>"},{"title":"开始使用Hexo","date":"2017-07-24T16:00:00.000Z","_content":"本站基于Hexo，写文章前需要先安装Hexo。（文档格式是Markdown）\n<!--more-->\n\n## Hexo使用\n\n### 全局安装\n\n``` bash\n$ npm install hexo-cli -g\n```\n详情：[Hexo](https://hexo.io/)\n\n\n### 本地预览\n\n``` bash\n$ hexo server\n```\n详情：[Hexo Server](https://hexo.io/docs/server.html)\n\n\n### 创建文章\n\n``` bash\n$ hexo new \"your note name\"\n```\n新建的文章位于 `/source/_post` 下面\n详情：[Hexo Writing](https://hexo.io/docs/writing.html)\n\n\n### 编译静态文件\n\n``` bash\n$ hexo generate\n```\n此操作是在服务器操作，本地无需提交 `public` 静态文件。\n详情：[Hexo Generate](https://hexo.io/docs/generating.html)\n\n\n### 发布文章\n\n把自己的 `markdown` 文件 `push` 上版本库即可，其他交由服务器去拉取并编译静态文件..\n\n","source":"_posts/hexo-start.md","raw":"---\ntitle: 开始使用Hexo\ndate: 2017-07-25\ntags:\n - hexo\ncategories:\n - lab\n---\n本站基于Hexo，写文章前需要先安装Hexo。（文档格式是Markdown）\n<!--more-->\n\n## Hexo使用\n\n### 全局安装\n\n``` bash\n$ npm install hexo-cli -g\n```\n详情：[Hexo](https://hexo.io/)\n\n\n### 本地预览\n\n``` bash\n$ hexo server\n```\n详情：[Hexo Server](https://hexo.io/docs/server.html)\n\n\n### 创建文章\n\n``` bash\n$ hexo new \"your note name\"\n```\n新建的文章位于 `/source/_post` 下面\n详情：[Hexo Writing](https://hexo.io/docs/writing.html)\n\n\n### 编译静态文件\n\n``` bash\n$ hexo generate\n```\n此操作是在服务器操作，本地无需提交 `public` 静态文件。\n详情：[Hexo Generate](https://hexo.io/docs/generating.html)\n\n\n### 发布文章\n\n把自己的 `markdown` 文件 `push` 上版本库即可，其他交由服务器去拉取并编译静态文件..\n\n","slug":"hexo-start","published":1,"updated":"2018-03-19T16:01:03.000Z","_id":"cjeyf1ulc000duq2eojms9hpq","comments":1,"layout":"post","photos":[],"link":"","content":"<p>本站基于Hexo，写文章前需要先安装Hexo。（文档格式是Markdown）<br><a id=\"more\"></a></p>\n<h2 id=\"Hexo使用\"><a href=\"#Hexo使用\" class=\"headerlink\" title=\"Hexo使用\"></a>Hexo使用</h2><h3 id=\"全局安装\"><a href=\"#全局安装\" class=\"headerlink\" title=\"全局安装\"></a>全局安装</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install hexo-cli -g</span><br></pre></td></tr></table></figure>\n<p>详情：<a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a></p>\n<h3 id=\"本地预览\"><a href=\"#本地预览\" class=\"headerlink\" title=\"本地预览\"></a>本地预览</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>详情：<a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Hexo Server</a></p>\n<h3 id=\"创建文章\"><a href=\"#创建文章\" class=\"headerlink\" title=\"创建文章\"></a>创建文章</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"your note name\"</span></span><br></pre></td></tr></table></figure>\n<p>新建的文章位于 <code>/source/_post</code> 下面<br>详情：<a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Hexo Writing</a></p>\n<h3 id=\"编译静态文件\"><a href=\"#编译静态文件\" class=\"headerlink\" title=\"编译静态文件\"></a>编译静态文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>此操作是在服务器操作，本地无需提交 <code>public</code> 静态文件。<br>详情：<a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Hexo Generate</a></p>\n<h3 id=\"发布文章\"><a href=\"#发布文章\" class=\"headerlink\" title=\"发布文章\"></a>发布文章</h3><p>把自己的 <code>markdown</code> 文件 <code>push</code> 上版本库即可，其他交由服务器去拉取并编译静态文件..</p>\n","site":{"data":{}},"excerpt":"<p>本站基于Hexo，写文章前需要先安装Hexo。（文档格式是Markdown）<br>","more":"</p>\n<h2 id=\"Hexo使用\"><a href=\"#Hexo使用\" class=\"headerlink\" title=\"Hexo使用\"></a>Hexo使用</h2><h3 id=\"全局安装\"><a href=\"#全局安装\" class=\"headerlink\" title=\"全局安装\"></a>全局安装</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install hexo-cli -g</span><br></pre></td></tr></table></figure>\n<p>详情：<a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a></p>\n<h3 id=\"本地预览\"><a href=\"#本地预览\" class=\"headerlink\" title=\"本地预览\"></a>本地预览</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>详情：<a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Hexo Server</a></p>\n<h3 id=\"创建文章\"><a href=\"#创建文章\" class=\"headerlink\" title=\"创建文章\"></a>创建文章</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"your note name\"</span></span><br></pre></td></tr></table></figure>\n<p>新建的文章位于 <code>/source/_post</code> 下面<br>详情：<a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Hexo Writing</a></p>\n<h3 id=\"编译静态文件\"><a href=\"#编译静态文件\" class=\"headerlink\" title=\"编译静态文件\"></a>编译静态文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>此操作是在服务器操作，本地无需提交 <code>public</code> 静态文件。<br>详情：<a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Hexo Generate</a></p>\n<h3 id=\"发布文章\"><a href=\"#发布文章\" class=\"headerlink\" title=\"发布文章\"></a>发布文章</h3><p>把自己的 <code>markdown</code> 文件 <code>push</code> 上版本库即可，其他交由服务器去拉取并编译静态文件..</p>"},{"title":"搭建一个无依赖性的ajax-jsonp","date":"2017-04-09T16:00:00.000Z","_content":"\n公司部分内部组件、模块需要调用接口restful_api，但由于某些原因可能不想为了使用ajax而去引用类似jquery之类的插件。于是打算写个适合自己，方便自己去调用接口；这里只提供方法，需要的可自行调整成适合自己的。\n<!--more-->\n\n\n## JSONP方式拿数据\n\n> jsonp在服务器端默认回调函数设置为callback  \n> jsonp在服务器端返回的数据通过callback.error_code字段判断正常与否  \n> 基本说明已在代码里，不做额外说明\n\n```js\n/*\n * Get data from interface by jsonp method\n * @param url {string} \n * @param query {object}\n * @param cb_success {function}\n * @param cb_fail {function}\n * @param cb_error {function}\n */\nfunction getJsonp(url, query, cb_success, cb_fail, cb_error){\n  var _query = '';\n  var script = doc.createElement('script');\n  // 处理非object的查询参数\n  query = Object.prototype.toString.call(query) === '[object Object]' ? query : {};\n  // 服务器默认的回调接口函数\n  window.callback = function(data){\n    if( data.error_code === 0 ){\n      cb_success && cb_success(data);\n    } else {\n      cb_fail && cb_fail(data);\n    }\n  }\n  // 接口访问异常处理\n  script.onerror = function(){\n    cb_error && cb_error();\n  }\n  // 拼接接口参数到地址里\n  _query = '?t=1';\n  for( var i in query ){\n    _query += ('&' + i + '=' + query[i]);\n  }\n  script.src = url + _query;\n  body.appendChild(script);\n}\n```\n\n以上提供5个参数调用接口\n\n+ url                api接口的地址，只允许jsonp，通过get方式调接口  \n+ query           接口查询参数  \n+ cb_success 正常接收数据，接口返回正常消息  \n+ cb_fail         正常接收数据，接口返回异常消息  \n+ cb_error      接口异常，访问不到接口，可能403、403、500之类（一般不用）\n\n通过以上方式调用一个接口时可以正常访问，然后同时调用两个以上的接口，会造成callback回调接口只能调用同个业务逻辑的回调，造成数据混乱，所以应该每次都动态配置回调函数  \n\n> 假设先跟服务器端约定自定义回调函数参数名为__c，可修改为：\n\n```js\nfunction getJsonp(url, query, cb_success, cb_fail, cb_error){\n  var _query = '';\n  var script = doc.createElement('script');\n  query = Object.prototype.toString.call(query) === '[object Object]' ? query : {};\n  // 不同的地方\n  // 以时间当作动态函数名（还有其他各种方式）\n  var timestamp = new Date().getTime();\n  var callbackName = 'callback_' + timestamp;\n  window[callbackName] = function(data){\n    if( data.error_code === 0 ){\n      cb_success && cb_success(data);\n    } else {\n      cb_fail && cb_fail(data);\n    }\n    // 请求接口结束后，清除无用回调函数及其页面script元素\n    delete window[callbackName];\n    document.body.removeChild( doc.querySelector('#' + callbackName) );\n  }\n  script.id = callbackName;\n  // 启用服务端的回调函数名自定义\n  _query = '?__c=' + callbackName;\n  for( var i in query ){\n    _query += ('&' + i + '=' + query[i]);\n  }\n  // 不同的地方\n  script.onerror = function(){\n    cb_error && cb_error();\n    delete window[callbackName];\n    document.body.removeChild( doc.querySelector('#' + callbackName) );\n  }\n  script.src = url + _query;\n  body.appendChild(script);\n}\n```\n\n通过以上方式即可动态生成回调函数，而且多个接口直接不回互相影响  \n（极端情况下，可能两个接口请求时间一样）\n\n```js\n// 极端方法\nvar callbackName = 'callback_' + timestamp;  // 换成\nvar callbackName = pathName + '_' + timestamp; // 把api路径转为回调函数名\n```\n\n其中pathName如：\n\n```js\n// url\nhttp://127.0.0.1/api/divio/user.jsonp\n// pathName可设为\napi_divio_user_timestamp\n```\n\n其他方式自行脑补吧～\n\n## 使用方法\n```js\ngetJsonp('/api/user.jsonp', {\n  page: 1,\n  limit: 10\n}, function(data){\n  // 接口正常接收，数据操作也正常\n}, function(data){\n  // 接口正常接收，数据操作异常\n}, function(){\n  // 接口请求失败，403、404、500、502等等\n});\n```","source":"_posts/custom-ajax-jsonp.md","raw":"---\ntitle: 搭建一个无依赖性的ajax-jsonp\ndate: 2017.04.10\ntags:\n - javascript\n---\n\n公司部分内部组件、模块需要调用接口restful_api，但由于某些原因可能不想为了使用ajax而去引用类似jquery之类的插件。于是打算写个适合自己，方便自己去调用接口；这里只提供方法，需要的可自行调整成适合自己的。\n<!--more-->\n\n\n## JSONP方式拿数据\n\n> jsonp在服务器端默认回调函数设置为callback  \n> jsonp在服务器端返回的数据通过callback.error_code字段判断正常与否  \n> 基本说明已在代码里，不做额外说明\n\n```js\n/*\n * Get data from interface by jsonp method\n * @param url {string} \n * @param query {object}\n * @param cb_success {function}\n * @param cb_fail {function}\n * @param cb_error {function}\n */\nfunction getJsonp(url, query, cb_success, cb_fail, cb_error){\n  var _query = '';\n  var script = doc.createElement('script');\n  // 处理非object的查询参数\n  query = Object.prototype.toString.call(query) === '[object Object]' ? query : {};\n  // 服务器默认的回调接口函数\n  window.callback = function(data){\n    if( data.error_code === 0 ){\n      cb_success && cb_success(data);\n    } else {\n      cb_fail && cb_fail(data);\n    }\n  }\n  // 接口访问异常处理\n  script.onerror = function(){\n    cb_error && cb_error();\n  }\n  // 拼接接口参数到地址里\n  _query = '?t=1';\n  for( var i in query ){\n    _query += ('&' + i + '=' + query[i]);\n  }\n  script.src = url + _query;\n  body.appendChild(script);\n}\n```\n\n以上提供5个参数调用接口\n\n+ url                api接口的地址，只允许jsonp，通过get方式调接口  \n+ query           接口查询参数  \n+ cb_success 正常接收数据，接口返回正常消息  \n+ cb_fail         正常接收数据，接口返回异常消息  \n+ cb_error      接口异常，访问不到接口，可能403、403、500之类（一般不用）\n\n通过以上方式调用一个接口时可以正常访问，然后同时调用两个以上的接口，会造成callback回调接口只能调用同个业务逻辑的回调，造成数据混乱，所以应该每次都动态配置回调函数  \n\n> 假设先跟服务器端约定自定义回调函数参数名为__c，可修改为：\n\n```js\nfunction getJsonp(url, query, cb_success, cb_fail, cb_error){\n  var _query = '';\n  var script = doc.createElement('script');\n  query = Object.prototype.toString.call(query) === '[object Object]' ? query : {};\n  // 不同的地方\n  // 以时间当作动态函数名（还有其他各种方式）\n  var timestamp = new Date().getTime();\n  var callbackName = 'callback_' + timestamp;\n  window[callbackName] = function(data){\n    if( data.error_code === 0 ){\n      cb_success && cb_success(data);\n    } else {\n      cb_fail && cb_fail(data);\n    }\n    // 请求接口结束后，清除无用回调函数及其页面script元素\n    delete window[callbackName];\n    document.body.removeChild( doc.querySelector('#' + callbackName) );\n  }\n  script.id = callbackName;\n  // 启用服务端的回调函数名自定义\n  _query = '?__c=' + callbackName;\n  for( var i in query ){\n    _query += ('&' + i + '=' + query[i]);\n  }\n  // 不同的地方\n  script.onerror = function(){\n    cb_error && cb_error();\n    delete window[callbackName];\n    document.body.removeChild( doc.querySelector('#' + callbackName) );\n  }\n  script.src = url + _query;\n  body.appendChild(script);\n}\n```\n\n通过以上方式即可动态生成回调函数，而且多个接口直接不回互相影响  \n（极端情况下，可能两个接口请求时间一样）\n\n```js\n// 极端方法\nvar callbackName = 'callback_' + timestamp;  // 换成\nvar callbackName = pathName + '_' + timestamp; // 把api路径转为回调函数名\n```\n\n其中pathName如：\n\n```js\n// url\nhttp://127.0.0.1/api/divio/user.jsonp\n// pathName可设为\napi_divio_user_timestamp\n```\n\n其他方式自行脑补吧～\n\n## 使用方法\n```js\ngetJsonp('/api/user.jsonp', {\n  page: 1,\n  limit: 10\n}, function(data){\n  // 接口正常接收，数据操作也正常\n}, function(data){\n  // 接口正常接收，数据操作异常\n}, function(){\n  // 接口请求失败，403、404、500、502等等\n});\n```","slug":"custom-ajax-jsonp","published":1,"updated":"2018-03-20T16:30:10.000Z","_id":"cjezv3qc90000js2e2xesaw5x","comments":1,"layout":"post","photos":[],"link":"","content":"<p>公司部分内部组件、模块需要调用接口restful_api，但由于某些原因可能不想为了使用ajax而去引用类似jquery之类的插件。于是打算写个适合自己，方便自己去调用接口；这里只提供方法，需要的可自行调整成适合自己的。<br><a id=\"more\"></a></p>\n<h2 id=\"JSONP方式拿数据\"><a href=\"#JSONP方式拿数据\" class=\"headerlink\" title=\"JSONP方式拿数据\"></a>JSONP方式拿数据</h2><blockquote>\n<p>jsonp在服务器端默认回调函数设置为callback<br>jsonp在服务器端返回的数据通过callback.error_code字段判断正常与否<br>基本说明已在代码里，不做额外说明</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> * Get data from interface by jsonp method</span></span><br><span class=\"line\"><span class=\"comment\"> * @param url &#123;string&#125; </span></span><br><span class=\"line\"><span class=\"comment\"> * @param query &#123;object&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * @param cb_success &#123;function&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * @param cb_fail &#123;function&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * @param cb_error &#123;function&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getJsonp</span>(<span class=\"params\">url, query, cb_success, cb_fail, cb_error</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> _query = <span class=\"string\">''</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> script = doc.createElement(<span class=\"string\">'script'</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 处理非object的查询参数</span></span><br><span class=\"line\">  query = <span class=\"built_in\">Object</span>.prototype.toString.call(query) === <span class=\"string\">'[object Object]'</span> ? query : &#123;&#125;;</span><br><span class=\"line\">  <span class=\"comment\">// 服务器默认的回调接口函数</span></span><br><span class=\"line\">  <span class=\"built_in\">window</span>.callback = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>( data.error_code === <span class=\"number\">0</span> )&#123;</span><br><span class=\"line\">      cb_success &amp;&amp; cb_success(data);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      cb_fail &amp;&amp; cb_fail(data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 接口访问异常处理</span></span><br><span class=\"line\">  script.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    cb_error &amp;&amp; cb_error();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 拼接接口参数到地址里</span></span><br><span class=\"line\">  _query = <span class=\"string\">'?t=1'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span>( <span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> query )&#123;</span><br><span class=\"line\">    _query += (<span class=\"string\">'&amp;'</span> + i + <span class=\"string\">'='</span> + query[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  script.src = url + _query;</span><br><span class=\"line\">  body.appendChild(script);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>以上提供5个参数调用接口</p>\n<ul>\n<li>url                api接口的地址，只允许jsonp，通过get方式调接口  </li>\n<li>query           接口查询参数  </li>\n<li>cb_success 正常接收数据，接口返回正常消息  </li>\n<li>cb_fail         正常接收数据，接口返回异常消息  </li>\n<li>cb_error      接口异常，访问不到接口，可能403、403、500之类（一般不用）</li>\n</ul>\n<p>通过以上方式调用一个接口时可以正常访问，然后同时调用两个以上的接口，会造成callback回调接口只能调用同个业务逻辑的回调，造成数据混乱，所以应该每次都动态配置回调函数  </p>\n<blockquote>\n<p>假设先跟服务器端约定自定义回调函数参数名为__c，可修改为：</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getJsonp</span>(<span class=\"params\">url, query, cb_success, cb_fail, cb_error</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> _query = <span class=\"string\">''</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> script = doc.createElement(<span class=\"string\">'script'</span>);</span><br><span class=\"line\">  query = <span class=\"built_in\">Object</span>.prototype.toString.call(query) === <span class=\"string\">'[object Object]'</span> ? query : &#123;&#125;;</span><br><span class=\"line\">  <span class=\"comment\">// 不同的地方</span></span><br><span class=\"line\">  <span class=\"comment\">// 以时间当作动态函数名（还有其他各种方式）</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> timestamp = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> callbackName = <span class=\"string\">'callback_'</span> + timestamp;</span><br><span class=\"line\">  <span class=\"built_in\">window</span>[callbackName] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>( data.error_code === <span class=\"number\">0</span> )&#123;</span><br><span class=\"line\">      cb_success &amp;&amp; cb_success(data);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      cb_fail &amp;&amp; cb_fail(data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 请求接口结束后，清除无用回调函数及其页面script元素</span></span><br><span class=\"line\">    <span class=\"keyword\">delete</span> <span class=\"built_in\">window</span>[callbackName];</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.body.removeChild( doc.querySelector(<span class=\"string\">'#'</span> + callbackName) );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  script.id = callbackName;</span><br><span class=\"line\">  <span class=\"comment\">// 启用服务端的回调函数名自定义</span></span><br><span class=\"line\">  _query = <span class=\"string\">'?__c='</span> + callbackName;</span><br><span class=\"line\">  <span class=\"keyword\">for</span>( <span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> query )&#123;</span><br><span class=\"line\">    _query += (<span class=\"string\">'&amp;'</span> + i + <span class=\"string\">'='</span> + query[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 不同的地方</span></span><br><span class=\"line\">  script.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    cb_error &amp;&amp; cb_error();</span><br><span class=\"line\">    <span class=\"keyword\">delete</span> <span class=\"built_in\">window</span>[callbackName];</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.body.removeChild( doc.querySelector(<span class=\"string\">'#'</span> + callbackName) );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  script.src = url + _query;</span><br><span class=\"line\">  body.appendChild(script);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>通过以上方式即可动态生成回调函数，而且多个接口直接不回互相影响<br>（极端情况下，可能两个接口请求时间一样）</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 极端方法</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> callbackName = <span class=\"string\">'callback_'</span> + timestamp;  <span class=\"comment\">// 换成</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> callbackName = pathName + <span class=\"string\">'_'</span> + timestamp; <span class=\"comment\">// 把api路径转为回调函数名</span></span><br></pre></td></tr></table></figure>\n<p>其中pathName如：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// url</span></span><br><span class=\"line\">http:<span class=\"comment\">//127.0.0.1/api/divio/user.jsonp</span></span><br><span class=\"line\"><span class=\"comment\">// pathName可设为</span></span><br><span class=\"line\">api_divio_user_timestamp</span><br></pre></td></tr></table></figure>\n<p>其他方式自行脑补吧～</p>\n<h2 id=\"使用方法\"><a href=\"#使用方法\" class=\"headerlink\" title=\"使用方法\"></a>使用方法</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getJsonp(<span class=\"string\">'/api/user.jsonp'</span>, &#123;</span><br><span class=\"line\">  page: <span class=\"number\">1</span>,</span><br><span class=\"line\">  limit: <span class=\"number\">10</span></span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 接口正常接收，数据操作也正常</span></span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 接口正常接收，数据操作异常</span></span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 接口请求失败，403、404、500、502等等</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<p>公司部分内部组件、模块需要调用接口restful_api，但由于某些原因可能不想为了使用ajax而去引用类似jquery之类的插件。于是打算写个适合自己，方便自己去调用接口；这里只提供方法，需要的可自行调整成适合自己的。<br>","more":"</p>\n<h2 id=\"JSONP方式拿数据\"><a href=\"#JSONP方式拿数据\" class=\"headerlink\" title=\"JSONP方式拿数据\"></a>JSONP方式拿数据</h2><blockquote>\n<p>jsonp在服务器端默认回调函数设置为callback<br>jsonp在服务器端返回的数据通过callback.error_code字段判断正常与否<br>基本说明已在代码里，不做额外说明</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> * Get data from interface by jsonp method</span></span><br><span class=\"line\"><span class=\"comment\"> * @param url &#123;string&#125; </span></span><br><span class=\"line\"><span class=\"comment\"> * @param query &#123;object&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * @param cb_success &#123;function&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * @param cb_fail &#123;function&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> * @param cb_error &#123;function&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getJsonp</span>(<span class=\"params\">url, query, cb_success, cb_fail, cb_error</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> _query = <span class=\"string\">''</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> script = doc.createElement(<span class=\"string\">'script'</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 处理非object的查询参数</span></span><br><span class=\"line\">  query = <span class=\"built_in\">Object</span>.prototype.toString.call(query) === <span class=\"string\">'[object Object]'</span> ? query : &#123;&#125;;</span><br><span class=\"line\">  <span class=\"comment\">// 服务器默认的回调接口函数</span></span><br><span class=\"line\">  <span class=\"built_in\">window</span>.callback = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>( data.error_code === <span class=\"number\">0</span> )&#123;</span><br><span class=\"line\">      cb_success &amp;&amp; cb_success(data);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      cb_fail &amp;&amp; cb_fail(data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 接口访问异常处理</span></span><br><span class=\"line\">  script.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    cb_error &amp;&amp; cb_error();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 拼接接口参数到地址里</span></span><br><span class=\"line\">  _query = <span class=\"string\">'?t=1'</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span>( <span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> query )&#123;</span><br><span class=\"line\">    _query += (<span class=\"string\">'&amp;'</span> + i + <span class=\"string\">'='</span> + query[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  script.src = url + _query;</span><br><span class=\"line\">  body.appendChild(script);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>以上提供5个参数调用接口</p>\n<ul>\n<li>url                api接口的地址，只允许jsonp，通过get方式调接口  </li>\n<li>query           接口查询参数  </li>\n<li>cb_success 正常接收数据，接口返回正常消息  </li>\n<li>cb_fail         正常接收数据，接口返回异常消息  </li>\n<li>cb_error      接口异常，访问不到接口，可能403、403、500之类（一般不用）</li>\n</ul>\n<p>通过以上方式调用一个接口时可以正常访问，然后同时调用两个以上的接口，会造成callback回调接口只能调用同个业务逻辑的回调，造成数据混乱，所以应该每次都动态配置回调函数  </p>\n<blockquote>\n<p>假设先跟服务器端约定自定义回调函数参数名为__c，可修改为：</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getJsonp</span>(<span class=\"params\">url, query, cb_success, cb_fail, cb_error</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> _query = <span class=\"string\">''</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> script = doc.createElement(<span class=\"string\">'script'</span>);</span><br><span class=\"line\">  query = <span class=\"built_in\">Object</span>.prototype.toString.call(query) === <span class=\"string\">'[object Object]'</span> ? query : &#123;&#125;;</span><br><span class=\"line\">  <span class=\"comment\">// 不同的地方</span></span><br><span class=\"line\">  <span class=\"comment\">// 以时间当作动态函数名（还有其他各种方式）</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> timestamp = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> callbackName = <span class=\"string\">'callback_'</span> + timestamp;</span><br><span class=\"line\">  <span class=\"built_in\">window</span>[callbackName] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>( data.error_code === <span class=\"number\">0</span> )&#123;</span><br><span class=\"line\">      cb_success &amp;&amp; cb_success(data);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      cb_fail &amp;&amp; cb_fail(data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 请求接口结束后，清除无用回调函数及其页面script元素</span></span><br><span class=\"line\">    <span class=\"keyword\">delete</span> <span class=\"built_in\">window</span>[callbackName];</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.body.removeChild( doc.querySelector(<span class=\"string\">'#'</span> + callbackName) );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  script.id = callbackName;</span><br><span class=\"line\">  <span class=\"comment\">// 启用服务端的回调函数名自定义</span></span><br><span class=\"line\">  _query = <span class=\"string\">'?__c='</span> + callbackName;</span><br><span class=\"line\">  <span class=\"keyword\">for</span>( <span class=\"keyword\">var</span> i <span class=\"keyword\">in</span> query )&#123;</span><br><span class=\"line\">    _query += (<span class=\"string\">'&amp;'</span> + i + <span class=\"string\">'='</span> + query[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 不同的地方</span></span><br><span class=\"line\">  script.onerror = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    cb_error &amp;&amp; cb_error();</span><br><span class=\"line\">    <span class=\"keyword\">delete</span> <span class=\"built_in\">window</span>[callbackName];</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.body.removeChild( doc.querySelector(<span class=\"string\">'#'</span> + callbackName) );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  script.src = url + _query;</span><br><span class=\"line\">  body.appendChild(script);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>通过以上方式即可动态生成回调函数，而且多个接口直接不回互相影响<br>（极端情况下，可能两个接口请求时间一样）</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 极端方法</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> callbackName = <span class=\"string\">'callback_'</span> + timestamp;  <span class=\"comment\">// 换成</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> callbackName = pathName + <span class=\"string\">'_'</span> + timestamp; <span class=\"comment\">// 把api路径转为回调函数名</span></span><br></pre></td></tr></table></figure>\n<p>其中pathName如：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// url</span></span><br><span class=\"line\">http:<span class=\"comment\">//127.0.0.1/api/divio/user.jsonp</span></span><br><span class=\"line\"><span class=\"comment\">// pathName可设为</span></span><br><span class=\"line\">api_divio_user_timestamp</span><br></pre></td></tr></table></figure>\n<p>其他方式自行脑补吧～</p>\n<h2 id=\"使用方法\"><a href=\"#使用方法\" class=\"headerlink\" title=\"使用方法\"></a>使用方法</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getJsonp(<span class=\"string\">'/api/user.jsonp'</span>, &#123;</span><br><span class=\"line\">  page: <span class=\"number\">1</span>,</span><br><span class=\"line\">  limit: <span class=\"number\">10</span></span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 接口正常接收，数据操作也正常</span></span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 接口正常接收，数据操作异常</span></span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 接口请求失败，403、404、500、502等等</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>"},{"title":"Ubuntu14.04安装最新版nodejs","date":"2017-05-09T16:00:00.000Z","_content":"最近公司服务器因为某些原因，导致服务器环境需要全部重新部署，安装nodejs又忘了，记录下，方便下次使用。\n<!--more-->\n\n\n## 安装最新版nodejs\n##### 更新ubuntu软件源\n    sudo apt-get update\n    sudo apt-get install -y python-software-properties software-properties-common\n    sudo add-apt-repository ppa:chris-lea/node.js\n    sudo apt-get update\n##### 安装nodejs\n    sudo apt-get install nodejs\n##### 更新npm的包镜像源，方便快速下载\n    sudo npm config set registry https://registry.npm.taobao.org\n    sudo npm config list\n##### 全局安装n管理器(用于管理nodejs版本)\n    sudo npm install n -g\n##### 安装最新的nodejs（stable版本）\n    sudo n stable\n    sudo node -v\n\n## QA\n##### Q: 更新软件源出现-找不到对应的KEY\n    // error code\n    W: There is no public key available for the following key IDs:\n    8B48AD6246925553\n    W: Failed to fetch http://mirrors.aliyuncs.com/ubuntu/dists/precise/Release.gpg  Could not connect to mirrors.aliyuncs.com:80 (10.143.34.200), connection timed out\n\n    // A：resolve: add key\n    gpg --keyserver keyserver.ubuntu.com --recv-keys 8B48AD6246925553\n    gpg -a --export 8B48AD6246925553 | sudo apt-key add -\n\n#### Q: aliyun、163等其他软件源一直出现下载失败\n    // error code\n    W: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise/Release.gpg  Could not connect to mirrors.163.com:80 (123.58.173.106). - connect (111: Connection refused)\n    W: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-security/Release.gpg  Unable to connect to mirrors.163.com:http:\n    W: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-updates/Release.gpg  Unable to connect to mirrors.163.com:http:\n    W: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-proposed/Release.gpg  Unable to connect to mirrors.163.com:http:\n    W: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-backports/Release.gpg  Unable to connect to mirrors.163.com:http:\n    W: Some index files failed to download. They have been ignored, or old ones used instead.\n\n    // A: 部分网络问题，下载失败，尝试换成官方源，虽然比较慢，但是能下载\n    // resolve：修改apt文件  /etc/apt/sources.list（注意备份）\n    # Ubuntu官方\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\n\n#### Q: sudo make编译nodejs失败\n    make[1]: *** [/home/software/node-v7.8.0/out/Release/obj.target/v8_libplatform/deps/v8/src/libplatform/default-platform.o] Error 1\n    make[1]: Leaving directory `/home/software/node-v7.8.0/out'\n    make: *** [node] Error 2\n\n    // A: gcc版本太低，需要把gcc升级到4.8以上\n\n## ubuntu软件源\n修改/etc/apt/sources.list为以下软件源（改前请备份）\n163和里面在部分网络下会一直下载失败，可以改回官方源下载\n##### 源列表\n[http://wiki.ubuntu.org.cn/模板:14.04source](http://wiki.ubuntu.org.cn/模板:14.04source)\n##### Ubuntu官方\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\n    \n##### 163软件源\n    deb http://mirrors.163.com/ubuntu/ precise main restricted universe multiverse\n    deb http://mirrors.163.com/ubuntu/ precise-security main restricted universe multiverse\n    deb http://mirrors.163.com/ubuntu/ precise-updates main restricted universe multiverse\n    deb http://mirrors.163.com/ubuntu/ precise-proposed main restricted universe multiverse\n    deb http://mirrors.163.com/ubuntu/ precise-backports main restricted universe multiverse\n    deb-src http://mirrors.163.com/ubuntu/ precise main restricted universe multiverse\n    deb-src http://mirrors.163.com/ubuntu/ precise-security main restricted universe multiverse\n    deb-src http://mirrors.163.com/ubuntu/ precise-updates main restricted universe multiverse\n    deb-src http://mirrors.163.com/ubuntu/ precise-proposed main restricted universe multiverse\n    deb-src http://mirrors.163.com/ubuntu/ precise-backports main restricted universe multiverse\n\n##### aliyun软件源\n    deb http://mirrors.aliyun.com/ubuntu/ precise main restricted universe multiverse\n    deb http://mirrors.aliyun.com/ubuntu/ precise-security main restricted universe multiverse\n    deb http://mirrors.aliyun.com/ubuntu/ precise-updates main restricted universe multiverse\n    deb http://mirrors.aliyun.com/ubuntu/ precise-proposed main restricted universe multiverse\n    deb http://mirrors.aliyun.com/ubuntu/ precise-backports main restricted universe multiverse\n    deb-src http://mirrors.aliyun.com/ubuntu/ precise main restricted universe multiverse\n    deb-src http://mirrors.aliyun.com/ubuntu/ precise-security main restricted universe multiverse\n    deb-src http://mirrors.aliyun.com/ubuntu/ precise-updates main restricted universe multiverse\n    deb-src http://mirrors.aliyun.com/ubuntu/ precise-proposed main restricted universe multiverse\n    deb-src http://mirrors.aliyun.com/ubuntu/ precise-backports main restricted universe multiverse\n\n    deb http://mirrors.aliyuncs.com/ubuntu/ precise main restricted universe multiverse\n    deb http://mirrors.aliyuncs.com/ubuntu/ precise-security main restricted universe multiverse\n    deb http://mirrors.aliyuncs.com/ubuntu/ precise-updates main restricted universe multiverse\n    deb http://mirrors.aliyuncs.com/ubuntu/ precise-proposed main restricted universe multiverse\n    deb http://mirrors.aliyuncs.com/ubuntu/ precise-backports main restricted universe multiverse\n    deb-src http://mirrors.aliyuncs.com/ubuntu/ precise main restricted universe multiverse\n    deb-src http://mirrors.aliyuncs.com/ubuntu/ precise-security main restricted universe multiverse\n    deb-src http://mirrors.aliyuncs.com/ubuntu/ precise-updates main restricted universe multiverse\n    deb-src http://mirrors.aliyuncs.com/ubuntu/ precise-proposed main restricted universe multiverse\n    deb-src http://mirrors.aliyuncs.com/ubuntu/ precise-backports main restricted universe multiverse","source":"_posts/ubuntu-14.04-nodejs-install.md","raw":"---\ntitle: Ubuntu14.04安装最新版nodejs\ndate: 2017.05.10\ntags:\n - ubuntu\n - nodejs\n---\n最近公司服务器因为某些原因，导致服务器环境需要全部重新部署，安装nodejs又忘了，记录下，方便下次使用。\n<!--more-->\n\n\n## 安装最新版nodejs\n##### 更新ubuntu软件源\n    sudo apt-get update\n    sudo apt-get install -y python-software-properties software-properties-common\n    sudo add-apt-repository ppa:chris-lea/node.js\n    sudo apt-get update\n##### 安装nodejs\n    sudo apt-get install nodejs\n##### 更新npm的包镜像源，方便快速下载\n    sudo npm config set registry https://registry.npm.taobao.org\n    sudo npm config list\n##### 全局安装n管理器(用于管理nodejs版本)\n    sudo npm install n -g\n##### 安装最新的nodejs（stable版本）\n    sudo n stable\n    sudo node -v\n\n## QA\n##### Q: 更新软件源出现-找不到对应的KEY\n    // error code\n    W: There is no public key available for the following key IDs:\n    8B48AD6246925553\n    W: Failed to fetch http://mirrors.aliyuncs.com/ubuntu/dists/precise/Release.gpg  Could not connect to mirrors.aliyuncs.com:80 (10.143.34.200), connection timed out\n\n    // A：resolve: add key\n    gpg --keyserver keyserver.ubuntu.com --recv-keys 8B48AD6246925553\n    gpg -a --export 8B48AD6246925553 | sudo apt-key add -\n\n#### Q: aliyun、163等其他软件源一直出现下载失败\n    // error code\n    W: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise/Release.gpg  Could not connect to mirrors.163.com:80 (123.58.173.106). - connect (111: Connection refused)\n    W: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-security/Release.gpg  Unable to connect to mirrors.163.com:http:\n    W: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-updates/Release.gpg  Unable to connect to mirrors.163.com:http:\n    W: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-proposed/Release.gpg  Unable to connect to mirrors.163.com:http:\n    W: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-backports/Release.gpg  Unable to connect to mirrors.163.com:http:\n    W: Some index files failed to download. They have been ignored, or old ones used instead.\n\n    // A: 部分网络问题，下载失败，尝试换成官方源，虽然比较慢，但是能下载\n    // resolve：修改apt文件  /etc/apt/sources.list（注意备份）\n    # Ubuntu官方\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\n\n#### Q: sudo make编译nodejs失败\n    make[1]: *** [/home/software/node-v7.8.0/out/Release/obj.target/v8_libplatform/deps/v8/src/libplatform/default-platform.o] Error 1\n    make[1]: Leaving directory `/home/software/node-v7.8.0/out'\n    make: *** [node] Error 2\n\n    // A: gcc版本太低，需要把gcc升级到4.8以上\n\n## ubuntu软件源\n修改/etc/apt/sources.list为以下软件源（改前请备份）\n163和里面在部分网络下会一直下载失败，可以改回官方源下载\n##### 源列表\n[http://wiki.ubuntu.org.cn/模板:14.04source](http://wiki.ubuntu.org.cn/模板:14.04source)\n##### Ubuntu官方\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\n    \n##### 163软件源\n    deb http://mirrors.163.com/ubuntu/ precise main restricted universe multiverse\n    deb http://mirrors.163.com/ubuntu/ precise-security main restricted universe multiverse\n    deb http://mirrors.163.com/ubuntu/ precise-updates main restricted universe multiverse\n    deb http://mirrors.163.com/ubuntu/ precise-proposed main restricted universe multiverse\n    deb http://mirrors.163.com/ubuntu/ precise-backports main restricted universe multiverse\n    deb-src http://mirrors.163.com/ubuntu/ precise main restricted universe multiverse\n    deb-src http://mirrors.163.com/ubuntu/ precise-security main restricted universe multiverse\n    deb-src http://mirrors.163.com/ubuntu/ precise-updates main restricted universe multiverse\n    deb-src http://mirrors.163.com/ubuntu/ precise-proposed main restricted universe multiverse\n    deb-src http://mirrors.163.com/ubuntu/ precise-backports main restricted universe multiverse\n\n##### aliyun软件源\n    deb http://mirrors.aliyun.com/ubuntu/ precise main restricted universe multiverse\n    deb http://mirrors.aliyun.com/ubuntu/ precise-security main restricted universe multiverse\n    deb http://mirrors.aliyun.com/ubuntu/ precise-updates main restricted universe multiverse\n    deb http://mirrors.aliyun.com/ubuntu/ precise-proposed main restricted universe multiverse\n    deb http://mirrors.aliyun.com/ubuntu/ precise-backports main restricted universe multiverse\n    deb-src http://mirrors.aliyun.com/ubuntu/ precise main restricted universe multiverse\n    deb-src http://mirrors.aliyun.com/ubuntu/ precise-security main restricted universe multiverse\n    deb-src http://mirrors.aliyun.com/ubuntu/ precise-updates main restricted universe multiverse\n    deb-src http://mirrors.aliyun.com/ubuntu/ precise-proposed main restricted universe multiverse\n    deb-src http://mirrors.aliyun.com/ubuntu/ precise-backports main restricted universe multiverse\n\n    deb http://mirrors.aliyuncs.com/ubuntu/ precise main restricted universe multiverse\n    deb http://mirrors.aliyuncs.com/ubuntu/ precise-security main restricted universe multiverse\n    deb http://mirrors.aliyuncs.com/ubuntu/ precise-updates main restricted universe multiverse\n    deb http://mirrors.aliyuncs.com/ubuntu/ precise-proposed main restricted universe multiverse\n    deb http://mirrors.aliyuncs.com/ubuntu/ precise-backports main restricted universe multiverse\n    deb-src http://mirrors.aliyuncs.com/ubuntu/ precise main restricted universe multiverse\n    deb-src http://mirrors.aliyuncs.com/ubuntu/ precise-security main restricted universe multiverse\n    deb-src http://mirrors.aliyuncs.com/ubuntu/ precise-updates main restricted universe multiverse\n    deb-src http://mirrors.aliyuncs.com/ubuntu/ precise-proposed main restricted universe multiverse\n    deb-src http://mirrors.aliyuncs.com/ubuntu/ precise-backports main restricted universe multiverse","slug":"ubuntu-14.04-nodejs-install","published":1,"updated":"2018-03-20T16:18:27.000Z","_id":"cjezv5a1t0002js2ekot7ai6z","comments":1,"layout":"post","photos":[],"link":"","content":"<p>最近公司服务器因为某些原因，导致服务器环境需要全部重新部署，安装nodejs又忘了，记录下，方便下次使用。<br><a id=\"more\"></a></p>\n<h2 id=\"安装最新版nodejs\"><a href=\"#安装最新版nodejs\" class=\"headerlink\" title=\"安装最新版nodejs\"></a>安装最新版nodejs</h2><h5 id=\"更新ubuntu软件源\"><a href=\"#更新ubuntu软件源\" class=\"headerlink\" title=\"更新ubuntu软件源\"></a>更新ubuntu软件源</h5><pre><code>sudo apt-get update\nsudo apt-get install -y python-software-properties software-properties-common\nsudo add-apt-repository ppa:chris-lea/node.js\nsudo apt-get update\n</code></pre><h5 id=\"安装nodejs\"><a href=\"#安装nodejs\" class=\"headerlink\" title=\"安装nodejs\"></a>安装nodejs</h5><pre><code>sudo apt-get install nodejs\n</code></pre><h5 id=\"更新npm的包镜像源，方便快速下载\"><a href=\"#更新npm的包镜像源，方便快速下载\" class=\"headerlink\" title=\"更新npm的包镜像源，方便快速下载\"></a>更新npm的包镜像源，方便快速下载</h5><pre><code>sudo npm config set registry https://registry.npm.taobao.org\nsudo npm config list\n</code></pre><h5 id=\"全局安装n管理器-用于管理nodejs版本\"><a href=\"#全局安装n管理器-用于管理nodejs版本\" class=\"headerlink\" title=\"全局安装n管理器(用于管理nodejs版本)\"></a>全局安装n管理器(用于管理nodejs版本)</h5><pre><code>sudo npm install n -g\n</code></pre><h5 id=\"安装最新的nodejs（stable版本）\"><a href=\"#安装最新的nodejs（stable版本）\" class=\"headerlink\" title=\"安装最新的nodejs（stable版本）\"></a>安装最新的nodejs（stable版本）</h5><pre><code>sudo n stable\nsudo node -v\n</code></pre><h2 id=\"QA\"><a href=\"#QA\" class=\"headerlink\" title=\"QA\"></a>QA</h2><h5 id=\"Q-更新软件源出现-找不到对应的KEY\"><a href=\"#Q-更新软件源出现-找不到对应的KEY\" class=\"headerlink\" title=\"Q: 更新软件源出现-找不到对应的KEY\"></a>Q: 更新软件源出现-找不到对应的KEY</h5><pre><code>// error code\nW: There is no public key available for the following key IDs:\n8B48AD6246925553\nW: Failed to fetch http://mirrors.aliyuncs.com/ubuntu/dists/precise/Release.gpg  Could not connect to mirrors.aliyuncs.com:80 (10.143.34.200), connection timed out\n\n// A：resolve: add key\ngpg --keyserver keyserver.ubuntu.com --recv-keys 8B48AD6246925553\ngpg -a --export 8B48AD6246925553 | sudo apt-key add -\n</code></pre><h4 id=\"Q-aliyun、163等其他软件源一直出现下载失败\"><a href=\"#Q-aliyun、163等其他软件源一直出现下载失败\" class=\"headerlink\" title=\"Q: aliyun、163等其他软件源一直出现下载失败\"></a>Q: aliyun、163等其他软件源一直出现下载失败</h4><pre><code>// error code\nW: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise/Release.gpg  Could not connect to mirrors.163.com:80 (123.58.173.106). - connect (111: Connection refused)\nW: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-security/Release.gpg  Unable to connect to mirrors.163.com:http:\nW: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-updates/Release.gpg  Unable to connect to mirrors.163.com:http:\nW: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-proposed/Release.gpg  Unable to connect to mirrors.163.com:http:\nW: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-backports/Release.gpg  Unable to connect to mirrors.163.com:http:\nW: Some index files failed to download. They have been ignored, or old ones used instead.\n\n// A: 部分网络问题，下载失败，尝试换成官方源，虽然比较慢，但是能下载\n// resolve：修改apt文件  /etc/apt/sources.list（注意备份）\n# Ubuntu官方\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\n</code></pre><h4 id=\"Q-sudo-make编译nodejs失败\"><a href=\"#Q-sudo-make编译nodejs失败\" class=\"headerlink\" title=\"Q: sudo make编译nodejs失败\"></a>Q: sudo make编译nodejs失败</h4><pre><code>make[1]: *** [/home/software/node-v7.8.0/out/Release/obj.target/v8_libplatform/deps/v8/src/libplatform/default-platform.o] Error 1\nmake[1]: Leaving directory `/home/software/node-v7.8.0/out&apos;\nmake: *** [node] Error 2\n\n// A: gcc版本太低，需要把gcc升级到4.8以上\n</code></pre><h2 id=\"ubuntu软件源\"><a href=\"#ubuntu软件源\" class=\"headerlink\" title=\"ubuntu软件源\"></a>ubuntu软件源</h2><p>修改/etc/apt/sources.list为以下软件源（改前请备份）<br>163和里面在部分网络下会一直下载失败，可以改回官方源下载</p>\n<h5 id=\"源列表\"><a href=\"#源列表\" class=\"headerlink\" title=\"源列表\"></a>源列表</h5><p><a href=\"http://wiki.ubuntu.org.cn/模板:14.04source\" target=\"_blank\" rel=\"noopener\">http://wiki.ubuntu.org.cn/模板:14.04source</a></p>\n<h5 id=\"Ubuntu官方\"><a href=\"#Ubuntu官方\" class=\"headerlink\" title=\"Ubuntu官方\"></a>Ubuntu官方</h5><pre><code>deb http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\n</code></pre><h5 id=\"163软件源\"><a href=\"#163软件源\" class=\"headerlink\" title=\"163软件源\"></a>163软件源</h5><pre><code>deb http://mirrors.163.com/ubuntu/ precise main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ precise-security main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ precise-proposed main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ precise-backports main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ precise main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ precise-security main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ precise-proposed main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ precise-backports main restricted universe multiverse\n</code></pre><h5 id=\"aliyun软件源\"><a href=\"#aliyun软件源\" class=\"headerlink\" title=\"aliyun软件源\"></a>aliyun软件源</h5><pre><code>deb http://mirrors.aliyun.com/ubuntu/ precise main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ precise-security main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ precise-proposed main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ precise-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ precise main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ precise-security main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ precise-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ precise-backports main restricted universe multiverse\n\ndeb http://mirrors.aliyuncs.com/ubuntu/ precise main restricted universe multiverse\ndeb http://mirrors.aliyuncs.com/ubuntu/ precise-security main restricted universe multiverse\ndeb http://mirrors.aliyuncs.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://mirrors.aliyuncs.com/ubuntu/ precise-proposed main restricted universe multiverse\ndeb http://mirrors.aliyuncs.com/ubuntu/ precise-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyuncs.com/ubuntu/ precise main restricted universe multiverse\ndeb-src http://mirrors.aliyuncs.com/ubuntu/ precise-security main restricted universe multiverse\ndeb-src http://mirrors.aliyuncs.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyuncs.com/ubuntu/ precise-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyuncs.com/ubuntu/ precise-backports main restricted universe multiverse\n</code></pre>","site":{"data":{}},"excerpt":"<p>最近公司服务器因为某些原因，导致服务器环境需要全部重新部署，安装nodejs又忘了，记录下，方便下次使用。<br>","more":"</p>\n<h2 id=\"安装最新版nodejs\"><a href=\"#安装最新版nodejs\" class=\"headerlink\" title=\"安装最新版nodejs\"></a>安装最新版nodejs</h2><h5 id=\"更新ubuntu软件源\"><a href=\"#更新ubuntu软件源\" class=\"headerlink\" title=\"更新ubuntu软件源\"></a>更新ubuntu软件源</h5><pre><code>sudo apt-get update\nsudo apt-get install -y python-software-properties software-properties-common\nsudo add-apt-repository ppa:chris-lea/node.js\nsudo apt-get update\n</code></pre><h5 id=\"安装nodejs\"><a href=\"#安装nodejs\" class=\"headerlink\" title=\"安装nodejs\"></a>安装nodejs</h5><pre><code>sudo apt-get install nodejs\n</code></pre><h5 id=\"更新npm的包镜像源，方便快速下载\"><a href=\"#更新npm的包镜像源，方便快速下载\" class=\"headerlink\" title=\"更新npm的包镜像源，方便快速下载\"></a>更新npm的包镜像源，方便快速下载</h5><pre><code>sudo npm config set registry https://registry.npm.taobao.org\nsudo npm config list\n</code></pre><h5 id=\"全局安装n管理器-用于管理nodejs版本\"><a href=\"#全局安装n管理器-用于管理nodejs版本\" class=\"headerlink\" title=\"全局安装n管理器(用于管理nodejs版本)\"></a>全局安装n管理器(用于管理nodejs版本)</h5><pre><code>sudo npm install n -g\n</code></pre><h5 id=\"安装最新的nodejs（stable版本）\"><a href=\"#安装最新的nodejs（stable版本）\" class=\"headerlink\" title=\"安装最新的nodejs（stable版本）\"></a>安装最新的nodejs（stable版本）</h5><pre><code>sudo n stable\nsudo node -v\n</code></pre><h2 id=\"QA\"><a href=\"#QA\" class=\"headerlink\" title=\"QA\"></a>QA</h2><h5 id=\"Q-更新软件源出现-找不到对应的KEY\"><a href=\"#Q-更新软件源出现-找不到对应的KEY\" class=\"headerlink\" title=\"Q: 更新软件源出现-找不到对应的KEY\"></a>Q: 更新软件源出现-找不到对应的KEY</h5><pre><code>// error code\nW: There is no public key available for the following key IDs:\n8B48AD6246925553\nW: Failed to fetch http://mirrors.aliyuncs.com/ubuntu/dists/precise/Release.gpg  Could not connect to mirrors.aliyuncs.com:80 (10.143.34.200), connection timed out\n\n// A：resolve: add key\ngpg --keyserver keyserver.ubuntu.com --recv-keys 8B48AD6246925553\ngpg -a --export 8B48AD6246925553 | sudo apt-key add -\n</code></pre><h4 id=\"Q-aliyun、163等其他软件源一直出现下载失败\"><a href=\"#Q-aliyun、163等其他软件源一直出现下载失败\" class=\"headerlink\" title=\"Q: aliyun、163等其他软件源一直出现下载失败\"></a>Q: aliyun、163等其他软件源一直出现下载失败</h4><pre><code>// error code\nW: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise/Release.gpg  Could not connect to mirrors.163.com:80 (123.58.173.106). - connect (111: Connection refused)\nW: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-security/Release.gpg  Unable to connect to mirrors.163.com:http:\nW: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-updates/Release.gpg  Unable to connect to mirrors.163.com:http:\nW: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-proposed/Release.gpg  Unable to connect to mirrors.163.com:http:\nW: Failed to fetch http://mirrors.163.com/ubuntu/dists/precise-backports/Release.gpg  Unable to connect to mirrors.163.com:http:\nW: Some index files failed to download. They have been ignored, or old ones used instead.\n\n// A: 部分网络问题，下载失败，尝试换成官方源，虽然比较慢，但是能下载\n// resolve：修改apt文件  /etc/apt/sources.list（注意备份）\n# Ubuntu官方\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\n</code></pre><h4 id=\"Q-sudo-make编译nodejs失败\"><a href=\"#Q-sudo-make编译nodejs失败\" class=\"headerlink\" title=\"Q: sudo make编译nodejs失败\"></a>Q: sudo make编译nodejs失败</h4><pre><code>make[1]: *** [/home/software/node-v7.8.0/out/Release/obj.target/v8_libplatform/deps/v8/src/libplatform/default-platform.o] Error 1\nmake[1]: Leaving directory `/home/software/node-v7.8.0/out&apos;\nmake: *** [node] Error 2\n\n// A: gcc版本太低，需要把gcc升级到4.8以上\n</code></pre><h2 id=\"ubuntu软件源\"><a href=\"#ubuntu软件源\" class=\"headerlink\" title=\"ubuntu软件源\"></a>ubuntu软件源</h2><p>修改/etc/apt/sources.list为以下软件源（改前请备份）<br>163和里面在部分网络下会一直下载失败，可以改回官方源下载</p>\n<h5 id=\"源列表\"><a href=\"#源列表\" class=\"headerlink\" title=\"源列表\"></a>源列表</h5><p><a href=\"http://wiki.ubuntu.org.cn/模板:14.04source\" target=\"_blank\" rel=\"noopener\">http://wiki.ubuntu.org.cn/模板:14.04source</a></p>\n<h5 id=\"Ubuntu官方\"><a href=\"#Ubuntu官方\" class=\"headerlink\" title=\"Ubuntu官方\"></a>Ubuntu官方</h5><pre><code>deb http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse\n</code></pre><h5 id=\"163软件源\"><a href=\"#163软件源\" class=\"headerlink\" title=\"163软件源\"></a>163软件源</h5><pre><code>deb http://mirrors.163.com/ubuntu/ precise main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ precise-security main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ precise-proposed main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ precise-backports main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ precise main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ precise-security main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ precise-proposed main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ precise-backports main restricted universe multiverse\n</code></pre><h5 id=\"aliyun软件源\"><a href=\"#aliyun软件源\" class=\"headerlink\" title=\"aliyun软件源\"></a>aliyun软件源</h5><pre><code>deb http://mirrors.aliyun.com/ubuntu/ precise main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ precise-security main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ precise-proposed main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ precise-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ precise main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ precise-security main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ precise-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ precise-backports main restricted universe multiverse\n\ndeb http://mirrors.aliyuncs.com/ubuntu/ precise main restricted universe multiverse\ndeb http://mirrors.aliyuncs.com/ubuntu/ precise-security main restricted universe multiverse\ndeb http://mirrors.aliyuncs.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb http://mirrors.aliyuncs.com/ubuntu/ precise-proposed main restricted universe multiverse\ndeb http://mirrors.aliyuncs.com/ubuntu/ precise-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyuncs.com/ubuntu/ precise main restricted universe multiverse\ndeb-src http://mirrors.aliyuncs.com/ubuntu/ precise-security main restricted universe multiverse\ndeb-src http://mirrors.aliyuncs.com/ubuntu/ precise-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyuncs.com/ubuntu/ precise-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyuncs.com/ubuntu/ precise-backports main restricted universe multiverse\n</code></pre>"},{"title":"Ubuntu16.04安装最新版nodejs","date":"2017-05-12T16:00:00.000Z","_content":"最近公司服务器因为某些原因，导致服务器环境需要全部重新部署，安装nodejs又忘了，记录下，方便下次使用。\n<!--more-->\n\n# 安装最新版nodejs\n##### 更新ubuntu软件源\n    sudo apt-get update\n    sudo apt-get install -y python-software-properties software-properties-common\n    sudo add-apt-repository ppa:chris-lea/node.js\n    sudo apt-get update\n##### 安装nodejs\n    sudo apt-get install nodejs\n    sudo apt install nodejs-legacy\n    sudo apt install npm\n##### 更新npm的包镜像源，方便快速下载\n    sudo npm config set registry https://registry.npm.taobao.org\n    sudo npm config list\n##### 全局安装n管理器(用于管理nodejs版本)\n    sudo npm install n -g\n##### 安装最新的nodejs（stable版本）\n    sudo n stable\n    sudo node -v\n\n# QA\n#### Q: apt-get update找不到文件\n    // error code\n    W: The repository 'http://ppa.launchpad.net/chris-lea/node.js/ubuntu xenial Release' does not have a Release file.\n    N: Data from such a repository can't be authenticated and is therefore potentially dangerous to use.\n    N: See apt-secure(8) manpage for repository creation and user configuration details.\n    E: Failed to fetch http://ppa.launchpad.net/chris-lea/node.js/ubuntu/dists/xenial/main/binary-amd64/Packages  404  Not Found\n    E: Some index files failed to download. They have been ignored, or old ones used instead.\n\n    // A: 修改node相关文件：/etc/apt/sources.list.d/chris-lea-ubuntu-node_js-xenial.list\n    deb http://ppa.launchpad.net/chris-lea/node.js/ubuntu trusty main\n    deb-src http://ppa.launchpad.net/chris-lea/node.js/ubuntu trusty main\n\n#### Q: node -v异常\n    node -v\n    -bash: /usr/local/bin/node: Permission denied\n\n    sudo node -v\n    Segmentation fault (core dumped)\n\n    // A: 重新安装nodejs\n    手动移除 /usr/local/lib/node_modules整个目录\n    手动移除 /usr/local/bin/node\n    手动移除 /usr/local/bin/n\n    手动移除 /usr/local/bin/npm\n\n# ubuntu软件源\n修改/etc/apt/sources.list为以下软件源（改前请备份）\n163和里面在部分网络下会一直下载失败，可以改回官方源下载\n##### 源列表\n[http://wiki.ubuntu.org.cn/模板:16.04source](http://wiki.ubuntu.org.cn/模板:16.04source)\n##### Ubuntu官方\n    deb http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ xenial-proposed main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-proposed main restricted universe multiverse","source":"_posts/ubuntu-16.04-nodejs-install.md","raw":"---\ntitle: Ubuntu16.04安装最新版nodejs\ndate: 2017.05.13\ntags:\n - ubuntu\n - nodejs\n---\n最近公司服务器因为某些原因，导致服务器环境需要全部重新部署，安装nodejs又忘了，记录下，方便下次使用。\n<!--more-->\n\n# 安装最新版nodejs\n##### 更新ubuntu软件源\n    sudo apt-get update\n    sudo apt-get install -y python-software-properties software-properties-common\n    sudo add-apt-repository ppa:chris-lea/node.js\n    sudo apt-get update\n##### 安装nodejs\n    sudo apt-get install nodejs\n    sudo apt install nodejs-legacy\n    sudo apt install npm\n##### 更新npm的包镜像源，方便快速下载\n    sudo npm config set registry https://registry.npm.taobao.org\n    sudo npm config list\n##### 全局安装n管理器(用于管理nodejs版本)\n    sudo npm install n -g\n##### 安装最新的nodejs（stable版本）\n    sudo n stable\n    sudo node -v\n\n# QA\n#### Q: apt-get update找不到文件\n    // error code\n    W: The repository 'http://ppa.launchpad.net/chris-lea/node.js/ubuntu xenial Release' does not have a Release file.\n    N: Data from such a repository can't be authenticated and is therefore potentially dangerous to use.\n    N: See apt-secure(8) manpage for repository creation and user configuration details.\n    E: Failed to fetch http://ppa.launchpad.net/chris-lea/node.js/ubuntu/dists/xenial/main/binary-amd64/Packages  404  Not Found\n    E: Some index files failed to download. They have been ignored, or old ones used instead.\n\n    // A: 修改node相关文件：/etc/apt/sources.list.d/chris-lea-ubuntu-node_js-xenial.list\n    deb http://ppa.launchpad.net/chris-lea/node.js/ubuntu trusty main\n    deb-src http://ppa.launchpad.net/chris-lea/node.js/ubuntu trusty main\n\n#### Q: node -v异常\n    node -v\n    -bash: /usr/local/bin/node: Permission denied\n\n    sudo node -v\n    Segmentation fault (core dumped)\n\n    // A: 重新安装nodejs\n    手动移除 /usr/local/lib/node_modules整个目录\n    手动移除 /usr/local/bin/node\n    手动移除 /usr/local/bin/n\n    手动移除 /usr/local/bin/npm\n\n# ubuntu软件源\n修改/etc/apt/sources.list为以下软件源（改前请备份）\n163和里面在部分网络下会一直下载失败，可以改回官方源下载\n##### 源列表\n[http://wiki.ubuntu.org.cn/模板:16.04source](http://wiki.ubuntu.org.cn/模板:16.04source)\n##### Ubuntu官方\n    deb http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse\n    deb http://cn.archive.ubuntu.com/ubuntu/ xenial-proposed main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse\n    deb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-proposed main restricted universe multiverse","slug":"ubuntu-16.04-nodejs-install","published":1,"updated":"2018-03-20T16:18:55.000Z","_id":"cjezv5txv0007js2ew1nf2xrv","comments":1,"layout":"post","photos":[],"link":"","content":"<p>最近公司服务器因为某些原因，导致服务器环境需要全部重新部署，安装nodejs又忘了，记录下，方便下次使用。<br><a id=\"more\"></a></p>\n<h1 id=\"安装最新版nodejs\"><a href=\"#安装最新版nodejs\" class=\"headerlink\" title=\"安装最新版nodejs\"></a>安装最新版nodejs</h1><h5 id=\"更新ubuntu软件源\"><a href=\"#更新ubuntu软件源\" class=\"headerlink\" title=\"更新ubuntu软件源\"></a>更新ubuntu软件源</h5><pre><code>sudo apt-get update\nsudo apt-get install -y python-software-properties software-properties-common\nsudo add-apt-repository ppa:chris-lea/node.js\nsudo apt-get update\n</code></pre><h5 id=\"安装nodejs\"><a href=\"#安装nodejs\" class=\"headerlink\" title=\"安装nodejs\"></a>安装nodejs</h5><pre><code>sudo apt-get install nodejs\nsudo apt install nodejs-legacy\nsudo apt install npm\n</code></pre><h5 id=\"更新npm的包镜像源，方便快速下载\"><a href=\"#更新npm的包镜像源，方便快速下载\" class=\"headerlink\" title=\"更新npm的包镜像源，方便快速下载\"></a>更新npm的包镜像源，方便快速下载</h5><pre><code>sudo npm config set registry https://registry.npm.taobao.org\nsudo npm config list\n</code></pre><h5 id=\"全局安装n管理器-用于管理nodejs版本\"><a href=\"#全局安装n管理器-用于管理nodejs版本\" class=\"headerlink\" title=\"全局安装n管理器(用于管理nodejs版本)\"></a>全局安装n管理器(用于管理nodejs版本)</h5><pre><code>sudo npm install n -g\n</code></pre><h5 id=\"安装最新的nodejs（stable版本）\"><a href=\"#安装最新的nodejs（stable版本）\" class=\"headerlink\" title=\"安装最新的nodejs（stable版本）\"></a>安装最新的nodejs（stable版本）</h5><pre><code>sudo n stable\nsudo node -v\n</code></pre><h1 id=\"QA\"><a href=\"#QA\" class=\"headerlink\" title=\"QA\"></a>QA</h1><h4 id=\"Q-apt-get-update找不到文件\"><a href=\"#Q-apt-get-update找不到文件\" class=\"headerlink\" title=\"Q: apt-get update找不到文件\"></a>Q: apt-get update找不到文件</h4><pre><code>// error code\nW: The repository &apos;http://ppa.launchpad.net/chris-lea/node.js/ubuntu xenial Release&apos; does not have a Release file.\nN: Data from such a repository can&apos;t be authenticated and is therefore potentially dangerous to use.\nN: See apt-secure(8) manpage for repository creation and user configuration details.\nE: Failed to fetch http://ppa.launchpad.net/chris-lea/node.js/ubuntu/dists/xenial/main/binary-amd64/Packages  404  Not Found\nE: Some index files failed to download. They have been ignored, or old ones used instead.\n\n// A: 修改node相关文件：/etc/apt/sources.list.d/chris-lea-ubuntu-node_js-xenial.list\ndeb http://ppa.launchpad.net/chris-lea/node.js/ubuntu trusty main\ndeb-src http://ppa.launchpad.net/chris-lea/node.js/ubuntu trusty main\n</code></pre><h4 id=\"Q-node-v异常\"><a href=\"#Q-node-v异常\" class=\"headerlink\" title=\"Q: node -v异常\"></a>Q: node -v异常</h4><pre><code>node -v\n-bash: /usr/local/bin/node: Permission denied\n\nsudo node -v\nSegmentation fault (core dumped)\n\n// A: 重新安装nodejs\n手动移除 /usr/local/lib/node_modules整个目录\n手动移除 /usr/local/bin/node\n手动移除 /usr/local/bin/n\n手动移除 /usr/local/bin/npm\n</code></pre><h1 id=\"ubuntu软件源\"><a href=\"#ubuntu软件源\" class=\"headerlink\" title=\"ubuntu软件源\"></a>ubuntu软件源</h1><p>修改/etc/apt/sources.list为以下软件源（改前请备份）<br>163和里面在部分网络下会一直下载失败，可以改回官方源下载</p>\n<h5 id=\"源列表\"><a href=\"#源列表\" class=\"headerlink\" title=\"源列表\"></a>源列表</h5><p><a href=\"http://wiki.ubuntu.org.cn/模板:16.04source\" target=\"_blank\" rel=\"noopener\">http://wiki.ubuntu.org.cn/模板:16.04source</a></p>\n<h5 id=\"Ubuntu官方\"><a href=\"#Ubuntu官方\" class=\"headerlink\" title=\"Ubuntu官方\"></a>Ubuntu官方</h5><pre><code>deb http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ xenial-proposed main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-proposed main restricted universe multiverse\n</code></pre>","site":{"data":{}},"excerpt":"<p>最近公司服务器因为某些原因，导致服务器环境需要全部重新部署，安装nodejs又忘了，记录下，方便下次使用。<br>","more":"</p>\n<h1 id=\"安装最新版nodejs\"><a href=\"#安装最新版nodejs\" class=\"headerlink\" title=\"安装最新版nodejs\"></a>安装最新版nodejs</h1><h5 id=\"更新ubuntu软件源\"><a href=\"#更新ubuntu软件源\" class=\"headerlink\" title=\"更新ubuntu软件源\"></a>更新ubuntu软件源</h5><pre><code>sudo apt-get update\nsudo apt-get install -y python-software-properties software-properties-common\nsudo add-apt-repository ppa:chris-lea/node.js\nsudo apt-get update\n</code></pre><h5 id=\"安装nodejs\"><a href=\"#安装nodejs\" class=\"headerlink\" title=\"安装nodejs\"></a>安装nodejs</h5><pre><code>sudo apt-get install nodejs\nsudo apt install nodejs-legacy\nsudo apt install npm\n</code></pre><h5 id=\"更新npm的包镜像源，方便快速下载\"><a href=\"#更新npm的包镜像源，方便快速下载\" class=\"headerlink\" title=\"更新npm的包镜像源，方便快速下载\"></a>更新npm的包镜像源，方便快速下载</h5><pre><code>sudo npm config set registry https://registry.npm.taobao.org\nsudo npm config list\n</code></pre><h5 id=\"全局安装n管理器-用于管理nodejs版本\"><a href=\"#全局安装n管理器-用于管理nodejs版本\" class=\"headerlink\" title=\"全局安装n管理器(用于管理nodejs版本)\"></a>全局安装n管理器(用于管理nodejs版本)</h5><pre><code>sudo npm install n -g\n</code></pre><h5 id=\"安装最新的nodejs（stable版本）\"><a href=\"#安装最新的nodejs（stable版本）\" class=\"headerlink\" title=\"安装最新的nodejs（stable版本）\"></a>安装最新的nodejs（stable版本）</h5><pre><code>sudo n stable\nsudo node -v\n</code></pre><h1 id=\"QA\"><a href=\"#QA\" class=\"headerlink\" title=\"QA\"></a>QA</h1><h4 id=\"Q-apt-get-update找不到文件\"><a href=\"#Q-apt-get-update找不到文件\" class=\"headerlink\" title=\"Q: apt-get update找不到文件\"></a>Q: apt-get update找不到文件</h4><pre><code>// error code\nW: The repository &apos;http://ppa.launchpad.net/chris-lea/node.js/ubuntu xenial Release&apos; does not have a Release file.\nN: Data from such a repository can&apos;t be authenticated and is therefore potentially dangerous to use.\nN: See apt-secure(8) manpage for repository creation and user configuration details.\nE: Failed to fetch http://ppa.launchpad.net/chris-lea/node.js/ubuntu/dists/xenial/main/binary-amd64/Packages  404  Not Found\nE: Some index files failed to download. They have been ignored, or old ones used instead.\n\n// A: 修改node相关文件：/etc/apt/sources.list.d/chris-lea-ubuntu-node_js-xenial.list\ndeb http://ppa.launchpad.net/chris-lea/node.js/ubuntu trusty main\ndeb-src http://ppa.launchpad.net/chris-lea/node.js/ubuntu trusty main\n</code></pre><h4 id=\"Q-node-v异常\"><a href=\"#Q-node-v异常\" class=\"headerlink\" title=\"Q: node -v异常\"></a>Q: node -v异常</h4><pre><code>node -v\n-bash: /usr/local/bin/node: Permission denied\n\nsudo node -v\nSegmentation fault (core dumped)\n\n// A: 重新安装nodejs\n手动移除 /usr/local/lib/node_modules整个目录\n手动移除 /usr/local/bin/node\n手动移除 /usr/local/bin/n\n手动移除 /usr/local/bin/npm\n</code></pre><h1 id=\"ubuntu软件源\"><a href=\"#ubuntu软件源\" class=\"headerlink\" title=\"ubuntu软件源\"></a>ubuntu软件源</h1><p>修改/etc/apt/sources.list为以下软件源（改前请备份）<br>163和里面在部分网络下会一直下载失败，可以改回官方源下载</p>\n<h5 id=\"源列表\"><a href=\"#源列表\" class=\"headerlink\" title=\"源列表\"></a>源列表</h5><p><a href=\"http://wiki.ubuntu.org.cn/模板:16.04source\" target=\"_blank\" rel=\"noopener\">http://wiki.ubuntu.org.cn/模板:16.04source</a></p>\n<h5 id=\"Ubuntu官方\"><a href=\"#Ubuntu官方\" class=\"headerlink\" title=\"Ubuntu官方\"></a>Ubuntu官方</h5><pre><code>deb http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse\ndeb http://cn.archive.ubuntu.com/ubuntu/ xenial-proposed main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse\ndeb-src http://cn.archive.ubuntu.com/ubuntu/ xenial-proposed main restricted universe multiverse\n</code></pre>"},{"title":"前端也有算法 - 位图法","date":"2017-10-23T16:00:00.000Z","_content":"一不小心就看到位图法，引起了我的兴趣。\n简单说下位图法（bitmap），用每一个bit来存放某个状态，常用于正整数类型中。（具体内容请自行百度）\n<!--more-->\n\n\n先来个抛砖引玉吧，曾经有一个题目，据说是腾讯的前端面试题，内容大概如下：\n### 示例一（已删数字）：\n\n##### 题目：\n 有一组数字，从1到n，假设n=10，乱序且不重复。例如[1,5,8,3,4,9,2,6,7,10]，随机删除3个数字，请找出3个被删除的数字。\n\n##### 算法：\n1. 以最大数字n=10来初始化位图数组\n2. 循环剩余数字，把状态位设置进位图数组里面（复杂度N）\n3. 循环状态位数组，把状态位不为1的提取到输出结果数组（复杂度N）\n4. 总复杂度2N，N∈正整数\n\n```javascript\n// 随机删除后的数组\nvar arr = [1, 3, 4, 9, 2, 7, 10];\n// 位图数组，多了索引0，所以设置11个\nvar bitmap = Array(11);\n// 输出数组\nvar outputArr = [];\n// 设置位图状态\nfor (var i = 0; i < arr.length; i++) {\n  bitmap[arr[i]] = 1;\n}\n// 提取已移除的数字\nfor (var i = 1; i < bitmap.length; i++) {\n  if (!bitmap[i]) {\n    outputArr.push(i);\n  }\n}\n// 输出[5, 6, 8]\nconsole.log(outputArr); \n```\n\n##### 原理：\n初始化的位图数组如下：\n```javascript\n[undefind * 11]\n```\n设置状态位后的位图数组（undefind当0）如下：\n```\n[0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1 ]\n[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n```\n不难看出，缺失的5,6,8，位图法就是通过这种原理来设置的\n另外，位图法还支持`排序`，从上得知数字也被重新排好序了\n\n### 示例二（去重）：\n##### 题目：\n已知两个数组[8,4,6,2,1,9]、[3,4,5,8,9,7,0]，请合并去除重复数字，并找出重复过的数字。\n\n##### 算法：\n1. 找出两个数组中最大的数字，用于构建位图数组， max=10（此步骤不做处理）\n2. 把已知的第一个数组写进位图数组里（复杂度N）\n3. 把已知的第二个数组与位图数组做比对，状态位为1的则是已存在的数字，即重复数字，比对完后也写进位图数组里（复杂度N）\n4. 循环位图数组，提取所有数字，即可得出合并后的数组（复杂度N）\n5. 总复杂度3N，N∈正整数\n\n```javascript\nvar arr1 = [8, 4, 6, 2, 1, 9];\nvar arr2 = [3, 4, 5, 8, 9, 7, 0];\nvar bitmap = Array(10);\n// 重复的数字\nvar repeatArr = [];\n// 合并后的数组\nvar concatArr = [];\n// 设置位图状态\nfor (var i = 0; i < arr1.length; i++) {\n  bitmap[arr1[i]] = 1;\n}\n// 找到重复数字\nfor (var i = 1; i < arr2.length; i++) {\n  if (bitmap[arr2[i]]) {\n    repeatArr.push(arr2[i]);\n  }\n  // 同时设置位图状态\n  bitmap[arr2[i]] = 1;\n}\n// 合并后的数组\nfor (var i = 0; i < bitmap.length; i++) {\n  if (bitmap[i]) {\n    concatArr.push(i);\n  }\n}\n// 输出[4, 8, 9]\nconsole.log(repeatArr); \n// 输出[0, 1, 2, 4, 5, 6, 7, 8, 9]\nconsole.log(concatArr); \n```\n\n### 数量级别：\n位图法能不能计算数以亿计的量级，答案是“能”\n一个bit状态位表示一条数据，\n我们来简单计算一下：\n```\n1B = 8bit\n1KB = 1024B\n1MB = 1024KB\n    ≈ 1024 * 1024 * 8 bit \n    ≈ 840万 bit\n```\n也就是说，800多万的数据才占用了1MB内存而已，剩下的就是cpu的计算了\n\n### 位图法总结\n1. 只能用于正整数\n2. 支持排序\n3. 支持去重\n4. 支持亿量级别计算\n至于使用场景，需要自己摸索，至少比二叉树的实际使用场景多","source":"_posts/fe-algorithm-bitmap.md","raw":"---\ntitle: 前端也有算法 - 位图法\ndate: 2017.10.24\ntags:\n - algorithm\n---\n一不小心就看到位图法，引起了我的兴趣。\n简单说下位图法（bitmap），用每一个bit来存放某个状态，常用于正整数类型中。（具体内容请自行百度）\n<!--more-->\n\n\n先来个抛砖引玉吧，曾经有一个题目，据说是腾讯的前端面试题，内容大概如下：\n### 示例一（已删数字）：\n\n##### 题目：\n 有一组数字，从1到n，假设n=10，乱序且不重复。例如[1,5,8,3,4,9,2,6,7,10]，随机删除3个数字，请找出3个被删除的数字。\n\n##### 算法：\n1. 以最大数字n=10来初始化位图数组\n2. 循环剩余数字，把状态位设置进位图数组里面（复杂度N）\n3. 循环状态位数组，把状态位不为1的提取到输出结果数组（复杂度N）\n4. 总复杂度2N，N∈正整数\n\n```javascript\n// 随机删除后的数组\nvar arr = [1, 3, 4, 9, 2, 7, 10];\n// 位图数组，多了索引0，所以设置11个\nvar bitmap = Array(11);\n// 输出数组\nvar outputArr = [];\n// 设置位图状态\nfor (var i = 0; i < arr.length; i++) {\n  bitmap[arr[i]] = 1;\n}\n// 提取已移除的数字\nfor (var i = 1; i < bitmap.length; i++) {\n  if (!bitmap[i]) {\n    outputArr.push(i);\n  }\n}\n// 输出[5, 6, 8]\nconsole.log(outputArr); \n```\n\n##### 原理：\n初始化的位图数组如下：\n```javascript\n[undefind * 11]\n```\n设置状态位后的位图数组（undefind当0）如下：\n```\n[0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1 ]\n[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n```\n不难看出，缺失的5,6,8，位图法就是通过这种原理来设置的\n另外，位图法还支持`排序`，从上得知数字也被重新排好序了\n\n### 示例二（去重）：\n##### 题目：\n已知两个数组[8,4,6,2,1,9]、[3,4,5,8,9,7,0]，请合并去除重复数字，并找出重复过的数字。\n\n##### 算法：\n1. 找出两个数组中最大的数字，用于构建位图数组， max=10（此步骤不做处理）\n2. 把已知的第一个数组写进位图数组里（复杂度N）\n3. 把已知的第二个数组与位图数组做比对，状态位为1的则是已存在的数字，即重复数字，比对完后也写进位图数组里（复杂度N）\n4. 循环位图数组，提取所有数字，即可得出合并后的数组（复杂度N）\n5. 总复杂度3N，N∈正整数\n\n```javascript\nvar arr1 = [8, 4, 6, 2, 1, 9];\nvar arr2 = [3, 4, 5, 8, 9, 7, 0];\nvar bitmap = Array(10);\n// 重复的数字\nvar repeatArr = [];\n// 合并后的数组\nvar concatArr = [];\n// 设置位图状态\nfor (var i = 0; i < arr1.length; i++) {\n  bitmap[arr1[i]] = 1;\n}\n// 找到重复数字\nfor (var i = 1; i < arr2.length; i++) {\n  if (bitmap[arr2[i]]) {\n    repeatArr.push(arr2[i]);\n  }\n  // 同时设置位图状态\n  bitmap[arr2[i]] = 1;\n}\n// 合并后的数组\nfor (var i = 0; i < bitmap.length; i++) {\n  if (bitmap[i]) {\n    concatArr.push(i);\n  }\n}\n// 输出[4, 8, 9]\nconsole.log(repeatArr); \n// 输出[0, 1, 2, 4, 5, 6, 7, 8, 9]\nconsole.log(concatArr); \n```\n\n### 数量级别：\n位图法能不能计算数以亿计的量级，答案是“能”\n一个bit状态位表示一条数据，\n我们来简单计算一下：\n```\n1B = 8bit\n1KB = 1024B\n1MB = 1024KB\n    ≈ 1024 * 1024 * 8 bit \n    ≈ 840万 bit\n```\n也就是说，800多万的数据才占用了1MB内存而已，剩下的就是cpu的计算了\n\n### 位图法总结\n1. 只能用于正整数\n2. 支持排序\n3. 支持去重\n4. 支持亿量级别计算\n至于使用场景，需要自己摸索，至少比二叉树的实际使用场景多","slug":"fe-algorithm-bitmap","published":1,"updated":"2018-03-20T16:19:29.000Z","_id":"cjezv6kni000ajs2exq9d84og","comments":1,"layout":"post","photos":[],"link":"","content":"<p>一不小心就看到位图法，引起了我的兴趣。<br>简单说下位图法（bitmap），用每一个bit来存放某个状态，常用于正整数类型中。（具体内容请自行百度）<br><a id=\"more\"></a></p>\n<p>先来个抛砖引玉吧，曾经有一个题目，据说是腾讯的前端面试题，内容大概如下：</p>\n<h3 id=\"示例一（已删数字）：\"><a href=\"#示例一（已删数字）：\" class=\"headerlink\" title=\"示例一（已删数字）：\"></a>示例一（已删数字）：</h3><h5 id=\"题目：\"><a href=\"#题目：\" class=\"headerlink\" title=\"题目：\"></a>题目：</h5><p> 有一组数字，从1到n，假设n=10，乱序且不重复。例如[1,5,8,3,4,9,2,6,7,10]，随机删除3个数字，请找出3个被删除的数字。</p>\n<h5 id=\"算法：\"><a href=\"#算法：\" class=\"headerlink\" title=\"算法：\"></a>算法：</h5><ol>\n<li>以最大数字n=10来初始化位图数组</li>\n<li>循环剩余数字，把状态位设置进位图数组里面（复杂度N）</li>\n<li>循环状态位数组，把状态位不为1的提取到输出结果数组（复杂度N）</li>\n<li>总复杂度2N，N∈正整数</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 随机删除后的数组</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">9</span>, <span class=\"number\">2</span>, <span class=\"number\">7</span>, <span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"comment\">// 位图数组，多了索引0，所以设置11个</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> bitmap = <span class=\"built_in\">Array</span>(<span class=\"number\">11</span>);</span><br><span class=\"line\"><span class=\"comment\">// 输出数组</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> outputArr = [];</span><br><span class=\"line\"><span class=\"comment\">// 设置位图状态</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">  bitmap[arr[i]] = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 提取已移除的数字</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; bitmap.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!bitmap[i]) &#123;</span><br><span class=\"line\">    outputArr.push(i);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 输出[5, 6, 8]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(outputArr);</span><br></pre></td></tr></table></figure>\n<h5 id=\"原理：\"><a href=\"#原理：\" class=\"headerlink\" title=\"原理：\"></a>原理：</h5><p>初始化的位图数组如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[undefind * <span class=\"number\">11</span>]</span><br></pre></td></tr></table></figure></p>\n<p>设置状态位后的位图数组（undefind当0）如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1 ]</span><br><span class=\"line\">[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span><br></pre></td></tr></table></figure></p>\n<p>不难看出，缺失的5,6,8，位图法就是通过这种原理来设置的<br>另外，位图法还支持<code>排序</code>，从上得知数字也被重新排好序了</p>\n<h3 id=\"示例二（去重）：\"><a href=\"#示例二（去重）：\" class=\"headerlink\" title=\"示例二（去重）：\"></a>示例二（去重）：</h3><h5 id=\"题目：-1\"><a href=\"#题目：-1\" class=\"headerlink\" title=\"题目：\"></a>题目：</h5><p>已知两个数组[8,4,6,2,1,9]、[3,4,5,8,9,7,0]，请合并去除重复数字，并找出重复过的数字。</p>\n<h5 id=\"算法：-1\"><a href=\"#算法：-1\" class=\"headerlink\" title=\"算法：\"></a>算法：</h5><ol>\n<li>找出两个数组中最大的数字，用于构建位图数组， max=10（此步骤不做处理）</li>\n<li>把已知的第一个数组写进位图数组里（复杂度N）</li>\n<li>把已知的第二个数组与位图数组做比对，状态位为1的则是已存在的数字，即重复数字，比对完后也写进位图数组里（复杂度N）</li>\n<li>循环位图数组，提取所有数字，即可得出合并后的数组（复杂度N）</li>\n<li>总复杂度3N，N∈正整数</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr1 = [<span class=\"number\">8</span>, <span class=\"number\">4</span>, <span class=\"number\">6</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"number\">9</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> arr2 = [<span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>, <span class=\"number\">7</span>, <span class=\"number\">0</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> bitmap = <span class=\"built_in\">Array</span>(<span class=\"number\">10</span>);</span><br><span class=\"line\"><span class=\"comment\">// 重复的数字</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> repeatArr = [];</span><br><span class=\"line\"><span class=\"comment\">// 合并后的数组</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> concatArr = [];</span><br><span class=\"line\"><span class=\"comment\">// 设置位图状态</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr1.length; i++) &#123;</span><br><span class=\"line\">  bitmap[arr1[i]] = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 找到重复数字</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; arr2.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (bitmap[arr2[i]]) &#123;</span><br><span class=\"line\">    repeatArr.push(arr2[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 同时设置位图状态</span></span><br><span class=\"line\">  bitmap[arr2[i]] = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 合并后的数组</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; bitmap.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (bitmap[i]) &#123;</span><br><span class=\"line\">    concatArr.push(i);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 输出[4, 8, 9]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(repeatArr); </span><br><span class=\"line\"><span class=\"comment\">// 输出[0, 1, 2, 4, 5, 6, 7, 8, 9]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(concatArr);</span><br></pre></td></tr></table></figure>\n<h3 id=\"数量级别：\"><a href=\"#数量级别：\" class=\"headerlink\" title=\"数量级别：\"></a>数量级别：</h3><p>位图法能不能计算数以亿计的量级，答案是“能”<br>一个bit状态位表示一条数据，<br>我们来简单计算一下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1B = 8bit</span><br><span class=\"line\">1KB = 1024B</span><br><span class=\"line\">1MB = 1024KB</span><br><span class=\"line\">    ≈ 1024 * 1024 * 8 bit </span><br><span class=\"line\">    ≈ 840万 bit</span><br></pre></td></tr></table></figure></p>\n<p>也就是说，800多万的数据才占用了1MB内存而已，剩下的就是cpu的计算了</p>\n<h3 id=\"位图法总结\"><a href=\"#位图法总结\" class=\"headerlink\" title=\"位图法总结\"></a>位图法总结</h3><ol>\n<li>只能用于正整数</li>\n<li>支持排序</li>\n<li>支持去重</li>\n<li>支持亿量级别计算<br>至于使用场景，需要自己摸索，至少比二叉树的实际使用场景多</li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>一不小心就看到位图法，引起了我的兴趣。<br>简单说下位图法（bitmap），用每一个bit来存放某个状态，常用于正整数类型中。（具体内容请自行百度）<br>","more":"</p>\n<p>先来个抛砖引玉吧，曾经有一个题目，据说是腾讯的前端面试题，内容大概如下：</p>\n<h3 id=\"示例一（已删数字）：\"><a href=\"#示例一（已删数字）：\" class=\"headerlink\" title=\"示例一（已删数字）：\"></a>示例一（已删数字）：</h3><h5 id=\"题目：\"><a href=\"#题目：\" class=\"headerlink\" title=\"题目：\"></a>题目：</h5><p> 有一组数字，从1到n，假设n=10，乱序且不重复。例如[1,5,8,3,4,9,2,6,7,10]，随机删除3个数字，请找出3个被删除的数字。</p>\n<h5 id=\"算法：\"><a href=\"#算法：\" class=\"headerlink\" title=\"算法：\"></a>算法：</h5><ol>\n<li>以最大数字n=10来初始化位图数组</li>\n<li>循环剩余数字，把状态位设置进位图数组里面（复杂度N）</li>\n<li>循环状态位数组，把状态位不为1的提取到输出结果数组（复杂度N）</li>\n<li>总复杂度2N，N∈正整数</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 随机删除后的数组</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">9</span>, <span class=\"number\">2</span>, <span class=\"number\">7</span>, <span class=\"number\">10</span>];</span><br><span class=\"line\"><span class=\"comment\">// 位图数组，多了索引0，所以设置11个</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> bitmap = <span class=\"built_in\">Array</span>(<span class=\"number\">11</span>);</span><br><span class=\"line\"><span class=\"comment\">// 输出数组</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> outputArr = [];</span><br><span class=\"line\"><span class=\"comment\">// 设置位图状态</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">  bitmap[arr[i]] = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 提取已移除的数字</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; bitmap.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!bitmap[i]) &#123;</span><br><span class=\"line\">    outputArr.push(i);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 输出[5, 6, 8]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(outputArr);</span><br></pre></td></tr></table></figure>\n<h5 id=\"原理：\"><a href=\"#原理：\" class=\"headerlink\" title=\"原理：\"></a>原理：</h5><p>初始化的位图数组如下：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[undefind * <span class=\"number\">11</span>]</span><br></pre></td></tr></table></figure></p>\n<p>设置状态位后的位图数组（undefind当0）如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1 ]</span><br><span class=\"line\">[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span><br></pre></td></tr></table></figure></p>\n<p>不难看出，缺失的5,6,8，位图法就是通过这种原理来设置的<br>另外，位图法还支持<code>排序</code>，从上得知数字也被重新排好序了</p>\n<h3 id=\"示例二（去重）：\"><a href=\"#示例二（去重）：\" class=\"headerlink\" title=\"示例二（去重）：\"></a>示例二（去重）：</h3><h5 id=\"题目：-1\"><a href=\"#题目：-1\" class=\"headerlink\" title=\"题目：\"></a>题目：</h5><p>已知两个数组[8,4,6,2,1,9]、[3,4,5,8,9,7,0]，请合并去除重复数字，并找出重复过的数字。</p>\n<h5 id=\"算法：-1\"><a href=\"#算法：-1\" class=\"headerlink\" title=\"算法：\"></a>算法：</h5><ol>\n<li>找出两个数组中最大的数字，用于构建位图数组， max=10（此步骤不做处理）</li>\n<li>把已知的第一个数组写进位图数组里（复杂度N）</li>\n<li>把已知的第二个数组与位图数组做比对，状态位为1的则是已存在的数字，即重复数字，比对完后也写进位图数组里（复杂度N）</li>\n<li>循环位图数组，提取所有数字，即可得出合并后的数组（复杂度N）</li>\n<li>总复杂度3N，N∈正整数</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr1 = [<span class=\"number\">8</span>, <span class=\"number\">4</span>, <span class=\"number\">6</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>, <span class=\"number\">9</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> arr2 = [<span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>, <span class=\"number\">7</span>, <span class=\"number\">0</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> bitmap = <span class=\"built_in\">Array</span>(<span class=\"number\">10</span>);</span><br><span class=\"line\"><span class=\"comment\">// 重复的数字</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> repeatArr = [];</span><br><span class=\"line\"><span class=\"comment\">// 合并后的数组</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> concatArr = [];</span><br><span class=\"line\"><span class=\"comment\">// 设置位图状态</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr1.length; i++) &#123;</span><br><span class=\"line\">  bitmap[arr1[i]] = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 找到重复数字</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; arr2.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (bitmap[arr2[i]]) &#123;</span><br><span class=\"line\">    repeatArr.push(arr2[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 同时设置位图状态</span></span><br><span class=\"line\">  bitmap[arr2[i]] = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 合并后的数组</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; bitmap.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (bitmap[i]) &#123;</span><br><span class=\"line\">    concatArr.push(i);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 输出[4, 8, 9]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(repeatArr); </span><br><span class=\"line\"><span class=\"comment\">// 输出[0, 1, 2, 4, 5, 6, 7, 8, 9]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(concatArr);</span><br></pre></td></tr></table></figure>\n<h3 id=\"数量级别：\"><a href=\"#数量级别：\" class=\"headerlink\" title=\"数量级别：\"></a>数量级别：</h3><p>位图法能不能计算数以亿计的量级，答案是“能”<br>一个bit状态位表示一条数据，<br>我们来简单计算一下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1B = 8bit</span><br><span class=\"line\">1KB = 1024B</span><br><span class=\"line\">1MB = 1024KB</span><br><span class=\"line\">    ≈ 1024 * 1024 * 8 bit </span><br><span class=\"line\">    ≈ 840万 bit</span><br></pre></td></tr></table></figure></p>\n<p>也就是说，800多万的数据才占用了1MB内存而已，剩下的就是cpu的计算了</p>\n<h3 id=\"位图法总结\"><a href=\"#位图法总结\" class=\"headerlink\" title=\"位图法总结\"></a>位图法总结</h3><ol>\n<li>只能用于正整数</li>\n<li>支持排序</li>\n<li>支持去重</li>\n<li>支持亿量级别计算<br>至于使用场景，需要自己摸索，至少比二叉树的实际使用场景多</li>\n</ol>"}],"PostAsset":[],"PostCategory":[{"post_id":"cjeyf0h5d0008uq2euh7m07a0","category_id":"cjew8dgjk0001uq2e9xtfidmi","_id":"cjeyf0h5h000auq2ey4lwa8v5"},{"post_id":"cjeyf1ulc000duq2eojms9hpq","category_id":"cjew8dgjk0001uq2e9xtfidmi","_id":"cjeyf2tdh000guq2ev6acms27"}],"PostTag":[{"post_id":"cjeyf0h5d0008uq2euh7m07a0","tag_id":"cjew8dgjk0002uq2egyj3l7jm","_id":"cjeyf0h5g0009uq2e4e2w40jc"},{"post_id":"cjeyf1ulc000duq2eojms9hpq","tag_id":"cjew8dgjk0002uq2egyj3l7jm","_id":"cjeyf2tdg000fuq2eynqiwf0y"},{"post_id":"cjezv3qc90000js2e2xesaw5x","tag_id":"cjew84oal0004uo2el55x93pc","_id":"cjezv3yru0001js2expkpafvf"},{"post_id":"cjezv5a1t0002js2ekot7ai6z","tag_id":"cjezv5etr0003js2eljhhd9dc","_id":"cjezv5ets0005js2e9zr9uvb7"},{"post_id":"cjezv5a1t0002js2ekot7ai6z","tag_id":"cjezv5ets0004js2eihqbe516","_id":"cjezv5ets0006js2e6amear51"},{"post_id":"cjezv5txv0007js2ew1nf2xrv","tag_id":"cjezv5etr0003js2eljhhd9dc","_id":"cjezv60hy0008js2el3wyfd73"},{"post_id":"cjezv5txv0007js2ew1nf2xrv","tag_id":"cjezv5ets0004js2eihqbe516","_id":"cjezv60hy0009js2eyppjbfel"},{"post_id":"cjezv6kni000ajs2exq9d84og","tag_id":"cjezv6qkp000bjs2e7pkuefo3","_id":"cjezv6qkp000cjs2ewuhpwpjy"}],"Tag":[{"name":"javascript","_id":"cjew84oal0004uo2el55x93pc"},{"name":"tutorial","_id":"cjew84obj000guo2evumdy63k"},{"name":"components","_id":"cjew84obs000nuo2e5tasmh9x"},{"name":"css","_id":"cjew84obx000suo2eafzu2vax"},{"name":"tutotial","_id":"cjew84oda001juo2e0aqfcecx"},{"name":"tool","_id":"cjew84odp001puo2ezflvdyqe"},{"name":"node","_id":"cjew84ody001uuo2eo611iwhe"},{"name":"express","_id":"cjew84oed0020uo2eeexpwe98"},{"name":"npm","_id":"cjew84oet0028uo2e21ddg9yh"},{"name":"Github","_id":"cjew84of6002euo2e5lpof0im"},{"name":"optimize","_id":"cjew84off002huo2efup3jnwc"},{"name":"review","_id":"cjew84ofs002ruo2e8f9mkjht"},{"name":"canvas","_id":"cjew84og0002vuo2e3x40s9mr"},{"name":"vue","_id":"cjew84ogq003buo2ex21m0k30"},{"name":"hexo","_id":"cjew8dgjk0002uq2egyj3l7jm"},{"name":"ubuntu","_id":"cjezv5etr0003js2eljhhd9dc"},{"name":"nodejs","_id":"cjezv5ets0004js2eihqbe516"},{"name":"algorithm","_id":"cjezv6qkp000bjs2e7pkuefo3"}]}}